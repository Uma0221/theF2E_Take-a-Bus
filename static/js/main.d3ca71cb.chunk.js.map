{"version":3,"sources":["components/HomeClosestStopBox/styles.module.scss","router/styles.module.scss","sidebar/Home/styles.module.scss","sidebar/NearbyStops/styles.module.scss","sidebar/CertainStop/styles.module.scss","sidebar/CertainRoute/styles.module.scss","sidebar/ScanQrcode/styles.module.scss","components/QrcodeScanner/styles.module.scss","components/NearbyStopsBox/styles.module.scss","components/RemindBox/styles.module.scss","components/HomeNearbyStopsBox/styles.module.scss","components/CertainRouteBox/styles.module.scss","store/actionTypes.js","store/reducer.js","router/path.js","components/Nav/index.js","asset/imgs/currentMarker.svg","asset/imgs/stopMarker.svg","asset/imgs/selectStopMarker.svg","store/actions.js","components/Map/index.js","components/ScanBox/index.js","components/ReserveBox/index.js","components/RemindBox/index.js","components/HomeClosestStopBox/index.js","components/HomeNearbyStopsBox/index.js","sidebar/Home/index.js","components/NearbyStopsBox/index.js","sidebar/NearbyStops/index.js","components/CertainStopBox/index.js","sidebar/CertainStop/index.js","components/CertainRouteBox/index.js","sidebar/CertainRoute/index.js","components/QrcodeScanner/index.js","sidebar/ScanQrcode/index.js","store/firebase.js","router/index.js","serviceWorkerRegistration.js","index.js","components/Map/styles.module.scss","components/CertainStopBox/styles.module.scss","components/ScanBox/styles.module.scss","components/Nav/styles.module.scss","components/ReserveBox/styles.module.scss"],"names":["module","exports","type","SET_POSITION","SET_LOCATION","SET_NEARBYSTOPS","SET_CURRENTBUSES","SET_CERTAINROUTES","SET_SELECTROUTESTOPSSORT","SET_SELECTROUTESTOPSTIME","SET_SELECTROUTEBUSES","SET_REMINDBUSES","SET_RESERVEBUS","SET_VEHICLE","BEGIN_DATA_REQUEST","SUCCESS_DATA_REQUEST","FAIL_DATA_REQUEST","StoreContext","createContext","initialState","position","location","nearbyStops","currentBuses","certainRoutes","selectRouteStopsSort","selectRouteStopsTime","selectRouteBuses","remindBuses","reserveBus","vehicle","requestdata","loading","error","reducer","state","action","payload","StoreProvider","props","useReducer","value","dispatch","Provider","children","Nav","reactlocation","useLocation","QueryString","search","lng","lat","className","styles","nav","box__spaceBetween","to","path","nav_logo","nav_search","button_icon","icon","faSearch","TDXBUS_URL","GetAuthorizationHeader","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","Authorization","getHMAC","setPosition","options","a","setLocation","url","axios","get","response","data","city","ctyName","town","townName","setNearbyStops","config","headers","map","station","stationUID","StationUID","stationID","StationID","stationName","StationName","Zh_tw","stationLon","StationPosition","PositionLon","stationLat","PositionLat","stationDistance","getDistance","latitude","longitude","routes","Stops","stops","push","RouteName","sort","b","nameFlag","IDFlag","authorityCodeFlag","nearbyStopsName","nearbyStopsID","authorityCodes","i","length","j","stationStops","k","substring","stationIDs","setCurrentBuses","cityJson","AuthorityCode","cityEn","bus","direction","Direction","routeUID","RouteUID","routeName","stopStatusArray","Math","round","EstimateTime","stopStatus","StopStatus","remindState","setCertainRoutes","departureStopNameZh","DepartureStopNameZh","destinationStopNameZh","DestinationStopNameZh","fareBufferZoneDescriptionZh","FareBufferZoneDescriptionZh","City","setSelectRouteStopsSort","selectRoute","setSelectRouteStopsTime","stopUID","StopUID","plateNumb","PlateNumb","estimateTime","setSelectRouteBuses","a2EventType","A2EventType","stopSequence","StopSequence","dutyStatus","DutyStatus","busStatus","BusStatus","setRemindBuses","buses","updatebuses","StopName","setReserveBus","updatebus","setVehicle","vehicle2","LocationMarker","navigate","useNavigate","useContext","useState","markers","setMarkers","redIcon","L","Icon","iconUrl","currentMarker","iconSize","iconAnchor","popupAnchor","shadowSize","currentIcon","blueIcon","stopMarker","selectIcon","selectStopMarker","initMap","useMap","useEffect","flyTo","getZoom","locate","on","e","latlng","clickMap","useMapEvents","click","stopsArray","nearbyStop","Marker","Tooltip","tooltip","opacity","offset","tooltip_rowBox","rowBox_titleText","rowBox__marginRight","marker","eventHandlers","rowBox_stopDistance","Map","MapContainer","center","zoom","scrollWheelZoom","TileLayer","attribution","ScanBox","sidebar_box","reserveBox","box__alignItemsCenter","box__center","box__icon","faQrcode","box__word","ReserveBox","pageUpdate","setPageUpdate","timeout","setTimeout","clearTimeout","reserveBox_routeInfoBox","routeInfoBox_routeName","routeInfoBox_routeDirection","routeInfoBox_routeTimeBox","box__flex","routeTimeBox_Time","routeTimeBox_Minute","routeInfoBox_stopName","faFlag","box__end","buttonBox_button","button_cancel","onClick","button_help","faUser","routeInfoBox_StopName","routeInfoBox_busName","faBus","stopName_name","stopName_number","RemindBox","index","busesArr","splice","ClosestStopBox","useDynamicRefs","getRef","setRef","overSize","setOverSize","ClosestStop_ref","useRef","ClosestStop_d_ref","ClosestStopWidth","setClosestStopWidth","ClosestStopDivWidth","setClosestStopDivWidth","closestStop","setClosestStop","currentRoutesBuses","setCurrentRoutesBuses","current","clientWidth","array","currentBuses2","remindBusesArray","Array","fill","el","id1","undefined","offsetWidth","box_linkRow","closestBox_titlebox__marginBottom","linkRow__fontSize","linkRow_arrowIcon","faArrowRight","closestBox_box__marginBottom","box__FlexWrap","ref","closestBox_stopName","closestBox_stopName_marquee","closestBox_stopDistance__fontSize","closestBox_BusInfo","currentRoutesBus","closestBox_currentInfoBox","box__alignItemsFlexStart","closestBox_flexBox","currentInfoBox_routeInfoBox","marquee_animation","currentInfoBox_routeState","routeState__textYellow","routeState__textGray","routeState__textDark","currentInfoBox_ButtonBox","ButtonBox_Button","ButtonBox_cancelButton","box__spaceAruond","ButtonBox_icon","faBell","ButtonBox_openButton","farBell","HomeNearbyStopsBox","SetOverSize","frontNearbyStops","setFrontNearbyStops","nearbyStops2","frontNearbyStopsLength","l","flag","m","stationRoutes","p_ref","div_ref","nearbyBox__marginBottom","routeStopBox_stopInfoBox","stopInfoBox_stopName","routeStopBox_routeNameBox","routeNameBox_routeName","Home","sidebar","HomeClosestStopBox","NearbyStopsBox","setNearbyStopsName","stationCount","setStationCount","count","nearbyBox_titleBox","titleBox_stopsInfo","nearbyBox_AllStopBox","nearbyBox_certainStopBox","certainStopBox_linkSetting","certainStopBox_frontBox","stopInfoBox_stopName__fontSize","nearbyBox_noInfoBox","nearbyBox_noInfoImg","nearbyBox_noInfoText","NearbyStops","CertainStopBox","openRoutes","setOpenRoutes","reverseState","console","log","certainStopBox_titlebox__marginBottom","box__start","certainStopBox_stopName","certainStopBox_stopInfo","stopInfo_detailBox","Button_White","Button_icon","faArrowAltCircleRight","certainStopBox_ChangeRouteBox","stopName","ChangeRouteBox_RouteBox","ChangeRouteBox_RouteBoxFocus","certainStopBox_AllRouteBox","certainStopBox_certainRouteBox","certainRouteBox_frontBox","certainRouteBox_routeInfo","certainRouteBox_routeNameBox","certainRouteBox_routeName","certainRouteBox_routeDirection","certainRouteBox_routeState","certainRouteBox_ButtonBox","box_displayNone","Button_cancelButton","Button_openButton","certainRouteBox_linkSetting","faRoute","certainStopBox_noInfoBox","certainStopBox_noInfoImg","certainStopBox_noInfoText","CertainStop","CertainRouteBox","openStops","setOpenStops","stopsArr","setStopsArr","stopsTimeArr","setStopsTimeArr","routeBusesArr","setRouteBusesArr","directionStops","setDirectionStops","setCity","selectRouteStopsSort2","stopsTimeArr2","selectRouteStopsTime2","stopPosition","StopPosition","stopBoarding","StopBoarding","selectRouteBuses2","routeBusesArr2","directionStops2","found","find","element","vehicleType","VehicleType","topBox_padding","certainRouteBox_titleBox","routeInfo_detailBox","Button_White_outline","faInfoCircle","certainRouteBox_buttonBox","stop","buttonBox_buttonFocus","bottomBox_padding","certainRouteBox_routeStopBox","certainRouteBox_routeInfoBox","id","stopInfoBox_busStatus","stopInfoBox_stopName_open","stopInfoBox_ButtonBox","stopInfoBox_ButtonBox_close","certainRouteBox_routeDotBox","routeDotBox_routeLine","box__alignItemsStart","routeDotBox_stopCircleBox","routeDotBox_stopCircleBox_open","stopCircleBox_stopCircle","backgroundColor_B","backgroundColor_W","stopCircle_plateNumb","plateNumb_icon","icon_topLeft_radius","icon_bottomLeft_radius","plateNumb_text","CertainRoute","QrcodeScanner","qrdata","setQrData","width","height","onUpdate","err","result","text","ScanQrcode","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","firebaseApp","messaging","getMessaging","Router","isTokenFound","setTokenFound","title","body","notification","setNotification","getToken","vapidKey","then","currentToken","catch","fetchToken","Promise","resolve","onMessage","container","exact","isLocalhost","Boolean","window","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onSuccess","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","fetch","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.d3ca71cb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar_box\":\"styles_sidebar_box__kmnni\",\"box__alignItemsCenter\":\"styles_box__alignItemsCenter__gbep7\",\"box__spaceBetween\":\"styles_box__spaceBetween__1bG7x\",\"box__spaceAruond\":\"styles_box__spaceAruond__1KcIA\",\"box__alignItemsFlexStart\":\"styles_box__alignItemsFlexStart__1E37V\",\"box__FlexWrap\":\"styles_box__FlexWrap__1fqdL\",\"box_linkRow\":\"styles_box_linkRow__Sia8j\",\"linkRow__fontSize\":\"styles_linkRow__fontSize__2vZU1\",\"linkRow_arrowIcon\":\"styles_linkRow_arrowIcon__wqN-A\",\"closestBox_titlebox__marginBottom\":\"styles_closestBox_titlebox__marginBottom__1k8Kb\",\"closestBox_box__marginBottom\":\"styles_closestBox_box__marginBottom__2rWPS\",\"closestBox_stopName\":\"styles_closestBox_stopName__9YsCn\",\"closestBox_stopName_marquee\":\"styles_closestBox_stopName_marquee__2Rnlh\",\"marquee\":\"styles_marquee__3TYkl\",\"closestBox_stopDistance__fontSize\":\"styles_closestBox_stopDistance__fontSize__2Q7iS\",\"closestBox_BusInfo\":\"styles_closestBox_BusInfo__v1i0S\",\"closestBox_currentInfoBox\":\"styles_closestBox_currentInfoBox__2No5H\",\"closestBox_flexBox\":\"styles_closestBox_flexBox__3UlHq\",\"currentInfoBox_routeInfoBox\":\"styles_currentInfoBox_routeInfoBox__1z26C\",\"routeInfoBox_routeName\":\"styles_routeInfoBox_routeName__1K5x4\",\"marquee_animation\":\"styles_marquee_animation__1LE3e\",\"routeInfoBox_routeDirection\":\"styles_routeInfoBox_routeDirection__2ZstE\",\"currentInfoBox_routeState\":\"styles_currentInfoBox_routeState__1NQfI\",\"ButtonBox_Button\":\"styles_ButtonBox_Button__2hjyq\",\"ButtonBox_openButton\":\"styles_ButtonBox_openButton__33Fch\",\"ButtonBox_cancelButton\":\"styles_ButtonBox_cancelButton__1APDN\",\"ButtonBox_icon\":\"styles_ButtonBox_icon__1tYoQ\",\"routeState__textYellow\":\"styles_routeState__textYellow__FNdi6\",\"routeState__textGray\":\"styles_routeState__textGray__1l9J8\",\"routeState__textDark\":\"styles_routeState__textDark__3kWt8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1al6D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"styles_sidebar__9sT40\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"styles_sidebar__1rcce\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"styles_sidebar__1ZWxq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"styles_sidebar__di_mj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"styles_sidebar__-lZLz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar_box\":\"styles_sidebar_box__2CAH2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar_box\":\"styles_sidebar_box__2oKUQ\",\"box__alignItemsCenter\":\"styles_box__alignItemsCenter__3-NGc\",\"box__center\":\"styles_box__center__3t7eu\",\"box__spaceBetween\":\"styles_box__spaceBetween__Fa99R\",\"box_linkRow\":\"styles_box_linkRow__i4BA8\",\"linkRow__fontSize\":\"styles_linkRow__fontSize__2z5Ku\",\"linkRow_arrowIcon\":\"styles_linkRow_arrowIcon__31Bms\",\"certainStopBox_linkSetting\":\"styles_certainStopBox_linkSetting__2wpYS\",\"nearbyBox_titleBox\":\"styles_nearbyBox_titleBox__3RD2y\",\"titleBox_stopsInfo\":\"styles_titleBox_stopsInfo__1_Szi\",\"nearbyBox_AllStopBox\":\"styles_nearbyBox_AllStopBox__oOAjl\",\"nearbyBox_certainStopBox\":\"styles_nearbyBox_certainStopBox__1ygcz\",\"certainStopBox_frontBox\":\"styles_certainStopBox_frontBox__LuXM4\",\"routeStopBox_stopInfoBox\":\"styles_routeStopBox_stopInfoBox__gX-ud\",\"stopInfoBox_stopName__fontSize\":\"styles_stopInfoBox_stopName__fontSize__2gc0q\",\"routeStopBox_routeNameBox\":\"styles_routeStopBox_routeNameBox__3kUPT\",\"routeNameBox_routeName\":\"styles_routeNameBox_routeName__Z_GmY\",\"nearbyBox_noInfoBox\":\"styles_nearbyBox_noInfoBox__3fkvu\",\"nearbyBox_noInfoImg\":\"styles_nearbyBox_noInfoImg__1U1mk\",\"nearbyBox_noInfoText\":\"styles_nearbyBox_noInfoText__3uq1_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar_box\":\"styles_sidebar_box__3wgKv\",\"box__alignItemsCenter\":\"styles_box__alignItemsCenter__2DFKI\",\"box__center\":\"styles_box__center__uHRWL\",\"box__flex\":\"styles_box__flex__yO6Ns\",\"box__end\":\"styles_box__end__2JKJX\",\"box__spaceBetween\":\"styles_box__spaceBetween__2tZxI\",\"reserveBox\":\"styles_reserveBox__26d9A\",\"routeInfoBox_routeName\":\"styles_routeInfoBox_routeName__3SfDP\",\"routeInfoBox_routeDirection\":\"styles_routeInfoBox_routeDirection__Edfes\",\"routeInfoBox_routeTimeBox\":\"styles_routeInfoBox_routeTimeBox__3Iy9q\",\"routeTimeBox_Time\":\"styles_routeTimeBox_Time__gcyHh\",\"routeTimeBox_Minute\":\"styles_routeTimeBox_Minute__ur1Tv\",\"routeInfoBox_stopName\":\"styles_routeInfoBox_stopName__1ueoH\",\"buttonBox_button\":\"styles_buttonBox_button__Uj38Q\",\"button_cancel\":\"styles_button_cancel__3y3Hj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar_box\":\"styles_sidebar_box__9OFfk\",\"box__alignItemsCenter\":\"styles_box__alignItemsCenter__3W4qt\",\"box__spaceBetween\":\"styles_box__spaceBetween__39glY\",\"box_linkRow\":\"styles_box_linkRow__-1Wi5\",\"linkRow__fontSize\":\"styles_linkRow__fontSize__2SXnL\",\"linkRow_arrowIcon\":\"styles_linkRow_arrowIcon__2FCJs\",\"nearbyBox__marginBottom\":\"styles_nearbyBox__marginBottom__2zlpo\",\"routeStopBox_stopInfoBox\":\"styles_routeStopBox_stopInfoBox__10Cne\",\"stopInfoBox_stopName\":\"styles_stopInfoBox_stopName__Vii79\",\"marquee_animation\":\"styles_marquee_animation__Q322w\",\"marquee\":\"styles_marquee__XmqcF\",\"routeStopBox_routeNameBox\":\"styles_routeStopBox_routeNameBox__hFbHO\",\"routeNameBox_routeName\":\"styles_routeNameBox_routeName__1HoEI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar_box\":\"styles_sidebar_box__jBYBR\",\"topBox_padding\":\"styles_topBox_padding__1ugZq\",\"bottomBox_padding\":\"styles_bottomBox_padding__3Bc0c\",\"box__alignItemsCenter\":\"styles_box__alignItemsCenter__3wXAM\",\"box__alignItemsStart\":\"styles_box__alignItemsStart__uuNQe\",\"box__center\":\"styles_box__center__29PR5\",\"box__spaceBetween\":\"styles_box__spaceBetween__2-dyP\",\"box__start\":\"styles_box__start__3vcbI\",\"certainRouteBox_titleBox\":\"styles_certainRouteBox_titleBox__37CL_\",\"certainRouteBox_routeInfo\":\"styles_certainRouteBox_routeInfo__2SObl\",\"routeInfo_detailBox\":\"styles_routeInfo_detailBox__1oikr\",\"certainRouteBox_buttonBox\":\"styles_certainRouteBox_buttonBox__3vVeL\",\"buttonBox_button\":\"styles_buttonBox_button__MaHs3\",\"buttonBox_buttonFocus\":\"styles_buttonBox_buttonFocus__3E9Jv\",\"certainRouteBox_routeInfoBox\":\"styles_certainRouteBox_routeInfoBox__2y2Vo\",\"certainRouteBox_routeStopBox\":\"styles_certainRouteBox_routeStopBox__1YuWF\",\"routeStopBox_stopInfoBox\":\"styles_routeStopBox_stopInfoBox__1Hm8p\",\"stopInfoBox_busStatus\":\"styles_stopInfoBox_busStatus__2p24Z\",\"stopInfoBox_stopName\":\"styles_stopInfoBox_stopName__c3qLr\",\"stopInfoBox_stopName_open\":\"styles_stopInfoBox_stopName_open__1IJuU\",\"certainRouteBox_routeDotBox\":\"styles_certainRouteBox_routeDotBox__1SN5j\",\"routeDotBox_routeLine\":\"styles_routeDotBox_routeLine__2KGPw\",\"routeDotBox_stopCircleBox\":\"styles_routeDotBox_stopCircleBox__3PtkN\",\"routeDotBox_stopCircleBox_open\":\"styles_routeDotBox_stopCircleBox_open__7d9ka\",\"stopCircleBox_stopCircle\":\"styles_stopCircleBox_stopCircle__2odkt\",\"backgroundColor_W\":\"styles_backgroundColor_W__3-X3M\",\"backgroundColor_B\":\"styles_backgroundColor_B__1wGVj\",\"stopCircle_plateNumb\":\"styles_stopCircle_plateNumb__2D-hK\",\"plateNumb_icon\":\"styles_plateNumb_icon__3MRr_\",\"icon_topLeft_radius\":\"styles_icon_topLeft_radius__3o3v6\",\"icon_bottomLeft_radius\":\"styles_icon_bottomLeft_radius__372mf\",\"plateNumb_text\":\"styles_plateNumb_text__2Fqxd\",\"routeState__textYellow\":\"styles_routeState__textYellow__3X3ee\",\"routeState__textGray\":\"styles_routeState__textGray__3PR5G\",\"routeState__textDark\":\"styles_routeState__textDark__2Lxjq\",\"stopInfoBox_ButtonBox\":\"styles_stopInfoBox_ButtonBox__2HKg7\",\"stopInfoBox_ButtonBox_close\":\"styles_stopInfoBox_ButtonBox_close__129bG\",\"ButtonBox_Button\":\"styles_ButtonBox_Button__2IYAz\",\"Button_White\":\"styles_Button_White__22NqK\",\"Button_White_outline\":\"styles_Button_White_outline__1Rter\",\"Button_openButton\":\"styles_Button_openButton__2LH5f\",\"Button_cancelButton\":\"styles_Button_cancelButton__2kbde\",\"Button_icon\":\"styles_Button_icon__DAZzV\"};","const type = {\n  SET_POSITION: 'SET_POSITION',\n  SET_LOCATION: 'SET_LOCATION',\n  SET_NEARBYSTOPS: 'SET_NEARBYSTOPS',\n  SET_CURRENTBUSES: 'SET_CURRENTBUSES',\n  SET_CERTAINROUTES: 'SET_CERTAINROUTES',\n  SET_SELECTROUTESTOPSSORT: 'SET_SELECTROUTESTOPSSORT',\n  SET_SELECTROUTESTOPSTIME: 'SET_SELECTROUTESTOPSTIME',\n  SET_SELECTROUTEBUSES: 'SET_SELECTROUTEBUSES',\n  SET_REMINDBUSES: 'SET_REMINDBUSES',\n  SET_RESERVEBUS: 'SET_RESERVEBUS',\n  SET_VEHICLE: 'SET_VEHICLE',\n  BEGIN_DATA_REQUEST: 'BEGIN_DATA_REQUEST',\n  SUCCESS_DATA_REQUEST: 'SUCCESS_DATA_REQUEST',\n  FAIL_DATA_REQUEST: ' FAIL_DATA_REQUEST',\n};\n\nexport default type;\n","import React, { createContext, useReducer } from 'react';\nimport PropTypes from 'prop-types';\n\nimport type from './actionTypes';\n\nexport const StoreContext = createContext();\n\nconst initialState = {\n  position: null,\n  location: null,\n  nearbyStops: null,\n  currentBuses: null,\n  certainRoutes: null,\n  selectRouteStopsSort: null,\n  selectRouteStopsTime: null,\n  selectRouteBuses: null,\n  remindBuses: [],\n  reserveBus: null,\n  vehicle: {},\n  requestdata: { loading: false, error: null },\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case type.SET_POSITION:\n      return {\n        ...state,\n        position: action.payload,\n      };\n    case type.SET_LOCATION:\n      return {\n        ...state,\n        location: action.payload,\n      };\n    case type.SET_NEARBYSTOPS:\n      return {\n        ...state,\n        nearbyStops: action.payload,\n      };\n    case type.SET_CURRENTBUSES:\n      return {\n        ...state,\n        currentBuses: action.payload,\n      };\n    case type.SET_CERTAINROUTES:\n      return {\n        ...state,\n        certainRoutes: action.payload,\n      };\n    case type.SET_SELECTROUTESTOPSSORT:\n      return {\n        ...state,\n        selectRouteStopsSort: action.payload,\n      };\n    case type.SET_SELECTROUTESTOPSTIME:\n      return {\n        ...state,\n        selectRouteStopsTime: action.payload,\n      };\n    case type.SET_SELECTROUTEBUSES:\n      return {\n        ...state,\n        selectRouteBuses: action.payload,\n      };\n    case type.SET_REMINDBUSES:\n      return {\n        ...state,\n        remindBuses: action.payload,\n      };\n    case type.SET_RESERVEBUS:\n      return {\n        ...state,\n        reserveBus: action.payload,\n      };\n    case type.SET_VEHICLE:\n      return {\n        ...state,\n        vehicle: action.payload,\n      };\n    case type.BEGIN_DATA_REQUEST:\n      return {\n        ...state,\n        requestdata: { ...state.requestdata, loading: true },\n      };\n    case type.SUCCESS_DATA_REQUEST:\n      return {\n        ...state,\n        requestdata: { ...state.requestdata, loading: false },\n      };\n    case type.FAIL_DATA_REQUEST:\n      return {\n        ...state,\n        requestdata: {\n          ...state.requestdata,\n          loading: false,\n          error: action.payload,\n        },\n      };\n    default:\n      return state;\n  }\n}\n\nexport function StoreProvider(props) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const value = { state, dispatch };\n\n  return (\n    <StoreContext.Provider value={value}>\n      {props.children}\n    </StoreContext.Provider>\n  );\n}\n\nStoreProvider.propTypes = {\n  children: PropTypes.object,\n};\n","export default {\n  home: '/',\n  certainStop: '/certainStop',\n  nearbyStops: '/nearbyStops',\n  certainRoute: '/certainRoute',\n  scanQrcode: '/scanQrcode',\n};\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport * as QueryString from 'query-string';\n\nimport path from '../../router/path';\nimport styles from './styles.module.scss';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\n\nfunction Nav() {\n  const reactlocation = useLocation();\n  const { lng, lat } = QueryString.parse(reactlocation.search);\n\n  return (\n    <div className={`${styles.nav} ${styles.box__spaceBetween}`}>\n      <Link to={`${path.home}?lng=${lng}&lat=${lat}`}>\n        <div className={styles.nav_logo}></div>\n      </Link>\n      <Link\n        to={`${path.home}?lng=${lng}&lat=${lat}`}\n        className={styles.nav_search}\n      >\n        <FontAwesomeIcon className={styles.button_icon} icon={faSearch} />\n      </Link>\n    </div>\n  );\n}\n\nexport default Nav;\n","export default __webpack_public_path__ + \"static/media/currentMarker.75df87e2.svg\";","export default __webpack_public_path__ + \"static/media/stopMarker.32658068.svg\";","export default __webpack_public_path__ + \"static/media/selectStopMarker.baef4053.svg\";","import axios from 'axios';\nimport jsSHA from 'jssha';\nimport { getDistance } from 'geolib';\n\nimport type from './actionTypes';\n\nimport cityJson from '../asset/json/city.json';\n\nconst LOCATION_URL = 'https://api.nlsc.gov.tw/other/TownVillagePointQuery';\nconst TDXBUS_URL = 'https://ptx.transportdata.tw/MOTC/v2/Bus';\n\nfunction GetAuthorizationHeader() {\n  const AppID = '88836dc3bd984400b7b3ea51e35e2627';\n  const AppKey = 'AqupXvSAdKge3ptnkghRmreRdrc';\n\n  const GMTString = new Date().toGMTString();\n  const ShaObj = new jsSHA('SHA-1', 'TEXT');\n  ShaObj.setHMACKey(AppKey, 'TEXT');\n  ShaObj.update('x-date: ' + GMTString);\n  const HMAC = ShaObj.getHMAC('B64');\n  const Authorization =\n    'hmac username=\"' +\n    AppID +\n    '\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"' +\n    HMAC +\n    '\"';\n\n  return {\n    Authorization: Authorization,\n    'X-Date': GMTString /*,'Accept-Encoding': 'gzip'*/,\n  }; //如果要將js運行在伺服器，可額外加入 'Accept-Encoding': 'gzip'，要求壓縮以減少網路傳輸資料量\n}\n\nexport const setPosition = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { position } = options;\n\n  try {\n    dispatch({\n      type: type.SET_POSITION,\n      payload: position,\n    });\n    dispatch({ type: type.SUCCESS_DATA_REQUEST });\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n\nexport const setLocation = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { lng, lat } = options;\n\n  try {\n    const url = `${LOCATION_URL}/${lng}/${lat}`;\n    const response = await axios.get(url);\n    const data = response.data;\n    const location = {\n      city: data.ctyName,\n      town: data.townName,\n    };\n\n    // console.log(location);\n\n    dispatch({\n      type: type.SET_LOCATION,\n      payload: location,\n    });\n    dispatch({ type: type.SUCCESS_DATA_REQUEST });\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n\nexport const setNearbyStops = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { lng, lat } = options;\n\n  try {\n    const url = `${TDXBUS_URL}/Station/NearBy?$spatialFilter=nearby(${lat},${lng},220)&$format=JSON'/${lng}/${lat}`;\n    const config = {\n      headers: GetAuthorizationHeader(),\n    };\n    const response = await axios.get(url, config);\n    const data = response.data;\n\n    const nearbyStops = [];\n\n    data.map((station) => {\n      const stationUID = station.StationUID;\n      const stationID = station.StationID;\n      const stationName = station.StationName.Zh_tw;\n      const stationLon = station.StationPosition.PositionLon;\n      const stationLat = station.StationPosition.PositionLat;\n\n      const stationDistance = getDistance(\n        { latitude: lat, longitude: lng },\n        { latitude: stationLat, longitude: stationLon },\n      );\n\n      const routes = [];\n      station.Stops.map((stops) => routes.push(stops.RouteName.Zh_tw));\n\n      nearbyStops.push({\n        stationUID: stationUID,\n        stationID: stationID,\n        stationName: stationName,\n        stationLon: stationLon,\n        stationLat: stationLat,\n        stationDistance: stationDistance,\n        routes: routes,\n      });\n    });\n\n    nearbyStops.sort(function (a, b) {\n      if (a.stationDistance > b.stationDistance) {\n        return 1;\n      }\n      if (a.stationDistance < b.stationDistance) {\n        return -1;\n      }\n      // a must be equal to b\n      return 0;\n    });\n\n    let nameFlag = true;\n    let IDFlag = true;\n    let authorityCodeFlag = true;\n    let nearbyStopsName = [];\n    let nearbyStopsID = [];\n    let authorityCodes = [];\n\n    for (let i = 0; i < nearbyStops.length; i++) {\n      IDFlag = true;\n      for (let j = 0; j < nearbyStopsID.length; j++) {\n        if (nearbyStops[i].stationID == nearbyStopsID[j].stationID) {\n          IDFlag = false;\n          j = nearbyStopsID.length;\n        }\n      }\n      if (IDFlag) {\n        nearbyStopsID.push({\n          stationName: nearbyStops[i].stationName,\n          stationID: nearbyStops[i].stationID,\n          stationDistance: nearbyStops[i].stationDistance,\n          position: {\n            lat: nearbyStops[i].stationLat,\n            lng: nearbyStops[i].stationLon,\n          },\n          stationStops: [],\n        });\n      }\n    }\n\n    for (let i = 0; i < nearbyStops.length; i++) {\n      for (let j = 0; j < nearbyStopsID.length; j++) {\n        if (nearbyStops[i].stationID == nearbyStopsID[j].stationID) {\n          nearbyStopsID[j].stationStops.push(nearbyStops[i]);\n        }\n      }\n    }\n\n    for (let i = 0; i < nearbyStopsID.length; i++) {\n      authorityCodes = [];\n      for (let j = 0; j < nearbyStopsID[i].stationStops.length; j++) {\n        authorityCodeFlag = true;\n        for (let k = 0; k < authorityCodes.length; k++) {\n          if (\n            authorityCodes[k] ==\n            nearbyStopsID[i].stationStops[j].stationUID.substring(0, 3)\n          ) {\n            authorityCodeFlag = false;\n            k = authorityCodes.length;\n          }\n        }\n        if (authorityCodeFlag) {\n          authorityCodes.push(\n            nearbyStopsID[i].stationStops[j].stationUID.substring(0, 3),\n          );\n        }\n      }\n      nearbyStopsID[i].authorityCodes = authorityCodes;\n    }\n\n    for (let i = 0; i < nearbyStopsID.length; i++) {\n      nameFlag = true;\n      for (let j = 0; j < nearbyStopsName.length; j++) {\n        if (nearbyStopsID[i].stationName == nearbyStopsName[j].stationName) {\n          nameFlag = false;\n          j = nearbyStopsName.length;\n        }\n      }\n      if (nameFlag) {\n        nearbyStopsName.push({\n          stationName: nearbyStopsID[i].stationName,\n          stationIDs: [],\n        });\n      }\n    }\n\n    for (let i = 0; i < nearbyStopsID.length; i++) {\n      for (let j = 0; j < nearbyStopsName.length; j++) {\n        if (nearbyStopsID[i].stationName == nearbyStopsName[j].stationName) {\n          nearbyStopsName[j].stationIDs.push(nearbyStopsID[i]);\n        }\n      }\n    }\n\n    dispatch({\n      type: type.SET_NEARBYSTOPS,\n      payload: nearbyStopsName,\n    });\n    dispatch({ type: type.SUCCESS_DATA_REQUEST });\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n\nexport const setCurrentBuses = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { authorityCodes, stationID } = options;\n\n  try {\n    if (!authorityCodes || !stationID) {\n      dispatch({\n        type: type.SET_CURRENTBUSES,\n        payload: null,\n      });\n      dispatch({ type: type.SUCCESS_DATA_REQUEST });\n    } else {\n      const currentBuses = [];\n      for (let i = 0; i < authorityCodes.length; i++) {\n        for (let j = 0; j < cityJson.length; j++) {\n          if (cityJson[j].AuthorityCode === authorityCodes[i]) {\n            const cityEn = cityJson[j].cityEn;\n\n            const url = `${TDXBUS_URL}/EstimatedTimeOfArrival/City/${cityEn}/PassThrough/Station/${stationID}`;\n            const config = {\n              headers: GetAuthorizationHeader(),\n            };\n            const response = await axios.get(url, config);\n            const data = response.data;\n\n            data.map((bus) => {\n              const direction = bus.Direction;\n              const routeUID = bus.RouteUID;\n              const routeName = bus.RouteName.Zh_tw;\n              const stopStatusArray = [\n                `${Math.round(bus.EstimateTime / 60)} 分`,\n                '尚未發車',\n                '交管不停靠',\n                '末班車已過',\n                '今日未營運',\n                '進站中',\n              ];\n\n              let stopStatus = null;\n              if (Math.round(bus.EstimateTime / 60) <= 1) {\n                stopStatus = stopStatusArray[5];\n              } else if (Math.round(bus.EstimateTime / 60) > 1) {\n                stopStatus = stopStatusArray[0];\n              } else if (bus.StopStatus >= 0) {\n                stopStatus = stopStatusArray[bus.StopStatus];\n              } else {\n                stopStatus = null;\n              }\n\n              currentBuses.push({\n                direction: direction,\n                routeUID: routeUID,\n                routeName: routeName,\n                stopStatus: stopStatus,\n                remindState: false,\n              });\n            });\n            j = cityJson.length;\n          }\n        }\n      }\n\n      dispatch({\n        type: type.SET_CURRENTBUSES,\n        payload: currentBuses,\n      });\n      dispatch({ type: type.SUCCESS_DATA_REQUEST });\n    }\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n\nexport const setCertainRoutes = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { currentBuses } = options;\n  const certainRoutes = [];\n\n  try {\n    if (!currentBuses) {\n      dispatch({\n        type: type.SET_CERTAINROUTES,\n        payload: null,\n      });\n      dispatch({ type: type.SUCCESS_DATA_REQUEST });\n    } else {\n      for (let i = 0; i < currentBuses.length; i++) {\n        for (let j = 0; j < cityJson.length; j++) {\n          if (\n            cityJson[j].AuthorityCode ===\n            currentBuses[i].routeUID.substring(0, 3)\n          ) {\n            const cityEn = cityJson[j].cityEn;\n\n            const url = `${TDXBUS_URL}/Route/City/${cityEn}/${currentBuses[i].routeName}`;\n            const config = {\n              headers: GetAuthorizationHeader(),\n            };\n            const response = await axios.get(url, config);\n            const data = response.data;\n\n            for (let k = 0; k < data.length; k++) {\n              if (data[k].RouteUID == currentBuses[i].routeUID) {\n                certainRoutes.push({\n                  routeName: currentBuses[i].routeName,\n                  departureStopNameZh: data[k].DepartureStopNameZh,\n                  destinationStopNameZh: data[k].DestinationStopNameZh,\n                  fareBufferZoneDescriptionZh:\n                    data[k].FareBufferZoneDescriptionZh,\n                  city: data[k].City,\n                });\n              }\n            }\n            j = cityJson.length;\n          }\n        }\n      }\n\n      dispatch({\n        type: type.SET_CERTAINROUTES,\n        payload: certainRoutes,\n      });\n\n      dispatch({ type: type.SUCCESS_DATA_REQUEST });\n    }\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n\nexport const setSelectRouteStopsSort = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { selectRoute } = options;\n  const selectRouteStopsSort = [];\n\n  try {\n    if (!selectRoute) {\n      dispatch({\n        type: type.SET_SELECTROUTESTOPSSORT,\n        payload: null,\n      });\n      dispatch({ type: type.SUCCESS_DATA_REQUEST });\n    } else {\n      for (let i = 0; i < cityJson.length; i++) {\n        if (\n          cityJson[i].AuthorityCode === selectRoute.routeUID.substring(0, 3)\n        ) {\n          const cityEn = cityJson[i].cityEn;\n\n          const url = `${TDXBUS_URL}/DisplayStopOfRoute/City/${cityEn}/${selectRoute.routeName}`;\n\n          const config = {\n            headers: GetAuthorizationHeader(),\n          };\n          const response = await axios.get(url, config);\n          const data = response.data;\n\n          for (let j = 0; j < data.length; j++) {\n            if (selectRoute.routeUID == data[j].RouteUID) {\n              selectRouteStopsSort.push({\n                direction: data[j].Direction,\n                routeUID: data[j].RouteUID,\n                routeName: selectRoute.routeName,\n                stops: data[j].Stops,\n              });\n            }\n          }\n          dispatch({\n            type: type.SET_SELECTROUTESTOPSSORT,\n            payload: selectRouteStopsSort,\n          });\n\n          dispatch({ type: type.SUCCESS_DATA_REQUEST });\n\n          i = cityJson.length;\n        }\n      }\n    }\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n\nexport const setSelectRouteStopsTime = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { selectRoute } = options;\n  const selectRouteStopsTime = [];\n\n  try {\n    if (!selectRoute) {\n      dispatch({\n        type: type.SET_SELECTROUTESTOPSTIME,\n        payload: null,\n      });\n      dispatch({ type: type.SUCCESS_DATA_REQUEST });\n    } else {\n      for (let i = 0; i < cityJson.length; i++) {\n        if (\n          cityJson[i].AuthorityCode === selectRoute.routeUID.substring(0, 3)\n        ) {\n          const cityEn = cityJson[i].cityEn;\n\n          const url = `${TDXBUS_URL}/EstimatedTimeOfArrival/City/${cityEn}/${selectRoute.routeName}`;\n\n          const config = {\n            headers: GetAuthorizationHeader(),\n          };\n          const response = await axios.get(url, config);\n          const data = response.data;\n\n          for (let j = 0; j < data.length; j++) {\n            if (selectRoute.routeUID == data[j].RouteUID) {\n              selectRouteStopsTime.push({\n                direction: data[j].Direction,\n                routeUID: data[j].RouteUID,\n                stopUID: data[j].StopUID,\n                stopStatus: data[j].StopStatus,\n                plateNumb: data[j].PlateNumb,\n                estimateTime: data[j].EstimateTime,\n              });\n            }\n          }\n          dispatch({\n            type: type.SET_SELECTROUTESTOPSTIME,\n            payload: selectRouteStopsTime,\n          });\n\n          dispatch({ type: type.SUCCESS_DATA_REQUEST });\n\n          i = cityJson.length;\n        }\n      }\n    }\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n\nexport const setSelectRouteBuses = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { selectRoute } = options;\n  const selectRouteBuses = [];\n\n  try {\n    if (!selectRoute) {\n      dispatch({\n        type: type.SET_SELECTROUTEBUSES,\n        payload: null,\n      });\n      dispatch({ type: type.SUCCESS_DATA_REQUEST });\n    } else {\n      for (let i = 0; i < cityJson.length; i++) {\n        if (\n          cityJson[i].AuthorityCode === selectRoute.routeUID.substring(0, 3)\n        ) {\n          const cityEn = cityJson[i].cityEn;\n\n          const url = `${TDXBUS_URL}/RealTimeNearStop/City/${cityEn}/${selectRoute.routeName}`;\n\n          const config = {\n            headers: GetAuthorizationHeader(),\n          };\n          const response = await axios.get(url, config);\n          const data = response.data;\n\n          for (let j = 0; j < data.length; j++) {\n            if (selectRoute.routeUID == data[j].RouteUID) {\n              selectRouteBuses.push({\n                routeUID: data[j].RouteUID,\n                direction: data[j].Direction,\n                plateNumb: data[j].PlateNumb,\n                a2EventType: data[j].A2EventType,\n                stopUID: data[j].StopUID,\n                stopSequence: data[j].StopSequence,\n                dutyStatus: data[j].DutyStatus,\n                busStatus: data[j].BusStatus,\n              });\n            }\n          }\n\n          dispatch({\n            type: type.SET_SELECTROUTEBUSES,\n            payload: selectRouteBuses,\n          });\n\n          dispatch({ type: type.SUCCESS_DATA_REQUEST });\n\n          i = cityJson.length;\n        }\n      }\n    }\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n\nexport const setRemindBuses = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { buses, update } = options;\n\n  try {\n    if (update && buses && buses.length > 0) {\n      let updatebuses = [...buses];\n\n      for (let i = 0; i < updatebuses.length; i++) {\n        for (let j = 0; j < cityJson.length; j++) {\n          if (\n            cityJson[j].AuthorityCode ===\n            updatebuses[i].routeUID.substring(0, 3)\n          ) {\n            const cityEn = cityJson[j].cityEn;\n\n            const url = `${TDXBUS_URL}/EstimatedTimeOfArrival/City/${cityEn}/${updatebuses[i].routeName}`;\n\n            const config = {\n              headers: GetAuthorizationHeader(),\n            };\n            const response = await axios.get(url, config);\n            const data = response.data;\n\n            for (let k = 0; k < data.length; k++) {\n              if (\n                updatebuses[i].routeUID == data[k].RouteUID &&\n                updatebuses[i].direction == data[k].Direction &&\n                updatebuses[i].stationName == data[k].StopName.Zh_tw\n              ) {\n                if (Math.round(data[k].EstimateTime / 60) <= 1) {\n                  updatebuses[i].stopStatus = '進站中';\n                } else if (Math.round(data[k].EstimateTime / 60) > 1) {\n                  updatebuses[i].stopStatus = `${Math.round(\n                    data[k].EstimateTime / 60,\n                  )} 分`;\n                }\n\n                if (i == updatebuses.length - 1) {\n                  dispatch({\n                    type: type.SET_REMINDBUSES,\n                    payload: updatebuses,\n                  });\n                  dispatch({ type: type.SUCCESS_DATA_REQUEST });\n                }\n\n                k = data.length;\n              }\n            }\n            j = cityJson.length;\n          }\n        }\n      }\n    } else {\n      dispatch({\n        type: type.SET_REMINDBUSES,\n        payload: buses,\n      });\n      dispatch({ type: type.SUCCESS_DATA_REQUEST });\n    }\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n\nexport const setReserveBus = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { bus, update } = options;\n\n  try {\n    if (update && bus) {\n      for (let i = 0; i < cityJson.length; i++) {\n        if (cityJson[i].AuthorityCode === bus.routeUID.substring(0, 3)) {\n          const cityEn = cityJson[i].cityEn;\n\n          const url = `${TDXBUS_URL}/EstimatedTimeOfArrival/City/${cityEn}/${bus.routeName}`;\n\n          const config = {\n            headers: GetAuthorizationHeader(),\n          };\n          const response = await axios.get(url, config);\n          const data = response.data;\n\n          let updatebus = bus;\n\n          for (let j = 0; j < data.length; j++) {\n            if (\n              bus.routeUID == data[j].RouteUID &&\n              bus.direction == data[j].Direction &&\n              bus.stationName == data[j].StopName.Zh_tw\n            ) {\n              if (Math.round(data[j].EstimateTime / 60) <= 1) {\n                updatebus.stopStatus = '進站中';\n              } else if (Math.round(data[j].EstimateTime / 60) > 1) {\n                updatebus.stopStatus = `${Math.round(\n                  data[j].EstimateTime / 60,\n                )} 分`;\n              }\n\n              j = data.length;\n            }\n          }\n\n          dispatch({\n            type: type.SET_RESERVEBUS,\n            payload: updatebus,\n          });\n          dispatch({ type: type.SUCCESS_DATA_REQUEST });\n\n          i = cityJson.length;\n        }\n      }\n    } else {\n      dispatch({\n        type: type.SET_RESERVEBUS,\n        payload: bus,\n      });\n      dispatch({ type: type.SUCCESS_DATA_REQUEST });\n    }\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n\nexport const setVehicle = async (dispatch, options) => {\n  dispatch({ type: type.BEGIN_DATA_REQUEST });\n  const { cityEn, vehicle } = options;\n  let vehicle2 = vehicle;\n\n  try {\n    const url = `${TDXBUS_URL}/Vehicle/City/${cityEn}`;\n\n    const config = {\n      headers: GetAuthorizationHeader(),\n    };\n    const response = await axios.get(url, config);\n    const data = response.data;\n\n    vehicle2[cityEn] = data;\n\n    dispatch({\n      type: type.SET_VEHICLE,\n      payload: vehicle2,\n    });\n    dispatch({ type: type.SUCCESS_DATA_REQUEST });\n  } catch (error) {\n    dispatch({ type: type.FAIL_DATA_REQUEST, payload: error });\n  }\n};\n","import React, { useEffect, useContext, useState, Fragment } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport * as QueryString from 'query-string';\n\nimport path from '../../router/path';\nimport styles from './styles.module.scss';\n\nimport currentMarker from '../../asset/imgs/currentMarker.svg';\nimport stopMarker from '../../asset/imgs/stopMarker.svg';\nimport selectStopMarker from '../../asset/imgs/selectStopMarker.svg';\n\nimport L from 'leaflet';\nimport {\n  MapContainer,\n  TileLayer,\n  Marker,\n  Tooltip,\n  useMap,\n  useMapEvents,\n} from 'react-leaflet';\n\nimport { setPosition, setLocation, setNearbyStops } from '../../store/actions';\nimport { StoreContext } from '../../store/reducer';\n\nfunction LocationMarker() {\n  const reactlocation = useLocation();\n  const { lng, lat, stationID } = QueryString.parse(reactlocation.search);\n  const navigate = useNavigate();\n\n  const {\n    state: { position, location, nearbyStops },\n    dispatch,\n  } = useContext(StoreContext);\n  const [markers, setMarkers] = useState([]);\n\n  const redIcon = new L.Icon({\n    iconUrl: currentMarker,\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41],\n    className: styles.currentIcon,\n  });\n\n  // const largeBlueIcon = new L.Icon({\n  //   iconUrl: stopMarker,\n  //   iconSize: [37, 61],\n  //   iconAnchor: [19, 61],\n  //   popupAnchor: [1, -34],\n  //   shadowSize: [61, 61],\n  //   className: styles.selectIcon,\n  // });\n\n  const blueIcon = new L.Icon({\n    iconUrl: stopMarker,\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41],\n  });\n\n  const selectIcon = new L.Icon({\n    iconUrl: selectStopMarker,\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41],\n    className: styles.selectIcon,\n  });\n\n  const initMap = useMap();\n\n  useEffect(() => {\n    if ((lng, lat)) {\n      setPosition(dispatch, { position: { lng, lat } });\n      initMap.flyTo({ lng, lat }, initMap.getZoom());\n    } else {\n      initMap.locate().on('locationfound', function (e) {\n        // console.log(e.latlng);\n        setPosition(dispatch, { position: e.latlng });\n        initMap.flyTo(e.latlng, initMap.getZoom());\n        navigate(`${path.home}?lng=${e.latlng.lng}&lat=${e.latlng.lat}`);\n      });\n    }\n  }, [initMap]);\n\n  const clickMap = useMapEvents({\n    click(e) {\n      setPosition(dispatch, { position: e.latlng });\n      clickMap.flyTo(e.latlng, clickMap.getZoom());\n      navigate(`${path.nearbyStops}?lng=${e.latlng.lng}&lat=${e.latlng.lat}`);\n    },\n  });\n\n  useEffect(() => {\n    if (position) {\n      setLocation(dispatch, { lng: position.lng, lat: position.lat });\n      setNearbyStops(dispatch, { lng: position.lng, lat: position.lat });\n      setMarkers([]);\n    }\n  }, [position]);\n\n  useEffect(() => {\n    if (nearbyStops) {\n      const stopsArray = [];\n      const nearbyStops2 = [...nearbyStops];\n\n      nearbyStops2.map((nearbyStopsName) => {\n        nearbyStopsName.stationIDs.map((nearbyStop) => {\n          stopsArray.push({\n            position: nearbyStop.position,\n            stationName: nearbyStop.stationName,\n            stationID: nearbyStop.stationID,\n            stationDistance: nearbyStop.stationDistance,\n          });\n        });\n      });\n      setMarkers(stopsArray);\n    }\n  }, [nearbyStops]);\n\n  useEffect(() => {\n    // if (markers) {\n    //   console.log(markers);\n    // }\n  }, [markers]);\n\n  return location === null ? null : (\n    <Fragment>\n      <Marker position={position} icon={redIcon}>\n        <Tooltip\n          className={styles.tooltip}\n          direction=\"top\"\n          opacity={1}\n          offset={[0, -41]}\n        >\n          <div className={styles.tooltip_rowBox}>\n            <div\n              className={`${styles.rowBox_titleText} ${styles.rowBox__marginRight}`}\n            >\n              {location.city}\n            </div>\n            <div className={styles.rowBox_titleText}>{location.town}</div>\n          </div>\n        </Tooltip>\n      </Marker>\n      {markers.map((marker) => (\n        <Marker\n          key={marker.stationID}\n          position={marker.position}\n          icon={stationID == marker.stationID ? selectIcon : blueIcon}\n          eventHandlers={{\n            click: () => {\n              if (stationID != marker.stationID) {\n                navigate(\n                  `${path.certainStop}?lng=${position.lng}&lat=${position.lat}&stationName=${marker.stationName}&stationID=${marker.stationID}&stationDistance=${marker.stationDistance}`,\n                );\n              }\n            },\n          }}\n        >\n          <Tooltip\n            className={styles.tooltip}\n            direction=\"top\"\n            opacity={1}\n            offset={[0, -40]}\n          >\n            <div className={styles.tooltip_rowBox}>\n              <div\n                className={`${styles.rowBox_titleText} ${styles.rowBox__marginRight}`}\n              >\n                {marker.stationName}\n              </div>\n              <div className={styles.rowBox_stopDistance}>\n                {marker.stationDistance} 公尺\n              </div>\n            </div>\n          </Tooltip>\n        </Marker>\n      ))}\n    </Fragment>\n  );\n}\n\nfunction Map() {\n  return (\n    <Fragment>\n      <MapContainer\n        center={[25.022729, 121.545103]}\n        zoom={17}\n        scrollWheelZoom={true}\n        className={styles.map}\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        <LocationMarker />\n      </MapContainer>\n    </Fragment>\n  );\n}\n\nexport default Map;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport path from '../../router/path';\nimport styles from './styles.module.scss';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faQrcode } from '@fortawesome/free-solid-svg-icons';\n\nfunction ScanBox() {\n  return (\n    <div className={styles.sidebar_box}>\n      <Link\n        to={path.scanQrcode}\n        className={`${styles.reserveBox} ${styles.box__alignItemsCenter} ${styles.box__center}`}\n      >\n        <FontAwesomeIcon className={styles.box__icon} icon={faQrcode} />\n        <div className={styles.box__word}>掃描預約</div>\n      </Link>\n    </div>\n  );\n}\n\nexport default ScanBox;\n","import React, { useEffect, useContext, useState } from 'react';\nimport styles from './styles.module.scss';\n\nimport { setReserveBus } from '../../store/actions';\nimport { StoreContext } from '../../store/reducer';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBus, faFlag, faUser } from '@fortawesome/free-solid-svg-icons';\n\nfunction ReserveBox() {\n  const {\n    state: {\n      reserveBus,\n      // requestdata: { loading },\n    },\n    dispatch,\n  } = useContext(StoreContext);\n  const [pageUpdate, setPageUpdate] = useState(true);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setPageUpdate(!pageUpdate);\n    }, 20000);\n\n    return () => clearTimeout(timeout);\n  }, [pageUpdate]);\n\n  useEffect(() => {\n    if (reserveBus && reserveBus.stationID) {\n      setReserveBus(dispatch, {\n        bus: reserveBus,\n        update: true,\n      });\n    }\n  }, [reserveBus, pageUpdate]);\n\n  return (\n    <div className={styles.sidebar_box}>\n      {reserveBus ? (\n        <>\n          {reserveBus.stationID ? (\n            <div className={`${styles.reserveBox}`}>\n              <div\n                className={`${styles.reserveBox_routeInfoBox} ${styles.box__spaceBetween} ${styles.box__alignItemsCenter}`}\n              >\n                <div>\n                  <div className={styles.routeInfoBox_routeName}>\n                    {reserveBus.routeName}\n                  </div>\n                  <div className={styles.routeInfoBox_routeDirection}>\n                    {reserveBus.direction == 225\n                      ? ''\n                      : reserveBus.direction == 2\n                      ? '環形'\n                      : reserveBus.direction == 1\n                      ? `往${reserveBus.departureStopNameZh}`\n                      : `往${reserveBus.destinationStopNameZh}`}\n                  </div>\n                </div>\n                <div\n                  className={`${styles.routeInfoBox_routeTimeBox} ${styles.box__flex}`}\n                >\n                  <div className={styles.routeTimeBox_Time}>{/* 20 */}</div>\n                  <div className={styles.routeTimeBox_Minute}>\n                    {reserveBus.stopStatus}\n                  </div>\n                </div>\n              </div>\n              <div\n                className={`${styles.routeInfoBox_stopName} ${styles.box__flex} ${styles.box__alignItemsCenter}`}\n              >\n                <FontAwesomeIcon icon={faFlag} />\n                <div>{reserveBus.stationName}</div>\n              </div>\n              <div className={styles.box__end}>\n                <button\n                  className={`${styles.buttonBox_button} ${styles.button_cancel} ${styles.box__alignItemsCenter} ${styles.box__center}`}\n                  onClick={() => {\n                    setReserveBus(dispatch, {\n                      buses: null,\n                    });\n                  }}\n                >\n                  取消預約\n                </button>\n                <div\n                  className={`${styles.buttonBox_button} ${styles.button_help} ${styles.box__alignItemsCenter} ${styles.box__center} `}\n                >\n                  <FontAwesomeIcon icon={faUser} />\n                  <div>司機協助</div>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className={`${styles.reserveBox}`}>\n              <div\n                className={`${styles.reserveBox_routeInfoBox} ${styles.box__spaceBetween} ${styles.box__alignItemsCenter}`}\n              >\n                <div>\n                  <div className={styles.routeInfoBox_StopName}>\n                    {reserveBus.stationName}\n                  </div>\n                </div>\n                <div\n                  className={`${styles.routeInfoBox_routeTimeBox} ${styles.box__flex}`}\n                >\n                  <div className={styles.routeTimeBox_Time}>28</div>\n                  <div className={styles.routeTimeBox_Minute}>分</div>\n                </div>\n              </div>\n              <div\n                className={`${styles.routeInfoBox_busName} ${styles.box__flex} ${styles.box__alignItemsCenter}`}\n              >\n                <FontAwesomeIcon icon={faBus} />\n                <div>\n                  {reserveBus.direction == 225\n                    ? reserveBus.routeName\n                    : reserveBus.direction == 2\n                    ? `${reserveBus.routeName} - 環形`\n                    : reserveBus.direction == 1\n                    ? `${reserveBus.routeName} - 往${reserveBus.departureStopNameZh}`\n                    : `${reserveBus.routeName} - 往${reserveBus.destinationStopNameZh}`}\n                </div>\n              </div>\n              <div\n                className={`${styles.routeInfoBox_stopName} ${styles.box__flex} ${styles.box__alignItemsCenter}`}\n              >\n                <FontAwesomeIcon icon={faFlag} />\n                <div className={styles.stopName_name}>\n                  目前：文山運動中心(興隆)\n                </div>\n                <div className={styles.stopName_number}>19站</div>\n              </div>\n              <div className={styles.box__end}>\n                <button\n                  className={`${styles.buttonBox_button} ${styles.button_cancel} ${styles.box__alignItemsCenter} ${styles.box__center}`}\n                  onClick={() => {\n                    setReserveBus(dispatch, {\n                      bus: null,\n                    });\n                  }}\n                >\n                  取消預約\n                </button>\n                <div\n                  className={`${styles.buttonBox_button} ${styles.button_help} ${styles.box__alignItemsCenter} ${styles.box__center} `}\n                >\n                  <FontAwesomeIcon icon={faUser} />\n                  <div>司機協助</div>\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      ) : (\n        <></>\n      )}\n    </div>\n  );\n}\n\nexport default ReserveBox;\n","import React, { useEffect, useContext, useState } from 'react';\nimport styles from './styles.module.scss';\n\nimport { setRemindBuses } from '../../store/actions';\nimport { StoreContext } from '../../store/reducer';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFlag } from '@fortawesome/free-solid-svg-icons';\n\nfunction RemindBox() {\n  const {\n    state: {\n      remindBuses,\n      // requestdata: { loading },\n    },\n    dispatch,\n  } = useContext(StoreContext);\n  const [pageUpdate, setPageUpdate] = useState(true);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setPageUpdate(!pageUpdate);\n    }, 20000);\n\n    return () => clearTimeout(timeout);\n  }, [pageUpdate]);\n\n  useEffect(() => {\n    if (remindBuses) {\n      setRemindBuses(dispatch, {\n        buses: remindBuses,\n        update: true,\n      });\n    }\n  }, [remindBuses.length, pageUpdate]);\n\n  return (\n    <div className={styles.sidebar_box}>\n      {remindBuses && remindBuses.length > 0 ? (\n        <>\n          {remindBuses.map((bus, index) => (\n            <div className={`${styles.reserveBox}`} key={index}>\n              <div\n                className={`${styles.reserveBox_routeInfoBox} ${styles.box__spaceBetween} ${styles.box__alignItemsCenter}`}\n              >\n                <div>\n                  <div className={styles.routeInfoBox_routeName}>\n                    {bus.routeName}\n                  </div>\n                  <div className={styles.routeInfoBox_routeDirection}>\n                    {bus.direction == 225\n                      ? ''\n                      : bus.direction == 2\n                      ? '環形'\n                      : bus.direction == 1\n                      ? `往${bus.departureStopNameZh}`\n                      : `往${bus.destinationStopNameZh}`}\n                  </div>\n                </div>\n                <div\n                  className={`${styles.routeInfoBox_routeTimeBox} ${styles.box__flex}`}\n                >\n                  <div className={styles.routeTimeBox_Time}>{/* 20 */}</div>\n                  <div className={styles.routeTimeBox_Minute}>\n                    {bus.stopStatus}\n                  </div>\n                </div>\n              </div>\n              <div\n                className={`${styles.routeInfoBox_stopName} ${styles.box__flex} ${styles.box__alignItemsCenter}`}\n              >\n                <FontAwesomeIcon icon={faFlag} />\n                <div>{bus.stationName}</div>\n              </div>\n              <div className={styles.box__end}>\n                <button\n                  className={`${styles.buttonBox_button} ${styles.button_cancel} ${styles.box__alignItemsCenter} ${styles.box__center}`}\n                  onClick={() => {\n                    let busesArr = remindBuses;\n                    busesArr.splice(index, 1);\n                    setRemindBuses(dispatch, {\n                      buses: busesArr,\n                    });\n                  }}\n                >\n                  取消提醒\n                </button>\n              </div>\n            </div>\n          ))}\n        </>\n      ) : (\n        <></>\n      )}\n    </div>\n  );\n}\n\nexport default RemindBox;\n","import React, { useEffect, useContext, useState, useRef } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport * as QueryString from 'query-string';\nimport useDynamicRefs from 'use-dynamic-refs';\n\nimport path from '../../router/path';\nimport styles from './styles.module.scss';\n\nimport {\n  setCurrentBuses,\n  setCertainRoutes,\n  setRemindBuses,\n} from '../../store/actions';\nimport { StoreContext } from '../../store/reducer';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// eslint-disable-next-line no-unused-vars\nimport { faArrowRight, faBell } from '@fortawesome/free-solid-svg-icons';\nimport { faBell as farBell } from '@fortawesome/free-regular-svg-icons';\n\nfunction ClosestStopBox() {\n  const [getRef, setRef] = useDynamicRefs();\n  const [overSize, setOverSize] = useState([]);\n  const ClosestStop_ref = useRef(null);\n  const ClosestStop_d_ref = useRef(null);\n  const [ClosestStopWidth, setClosestStopWidth] = useState(0);\n  const [ClosestStopDivWidth, setClosestStopDivWidth] = useState(0);\n\n  const reactlocation = useLocation();\n  const { lng, lat } = QueryString.parse(reactlocation.search);\n\n  const {\n    state: {\n      nearbyStops,\n      currentBuses,\n      certainRoutes,\n      remindBuses,\n      // requestdata: { loading },\n    },\n    dispatch,\n  } = useContext(StoreContext);\n  const [closestStop, setClosestStop] = useState(null);\n  const [currentRoutesBuses, setCurrentRoutesBuses] = useState(null);\n  const [pageUpdate, setPageUpdate] = useState(true);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setPageUpdate(!pageUpdate);\n    }, 20000);\n\n    return () => clearTimeout(timeout);\n  }, [pageUpdate]);\n\n  useEffect(() => {\n    if (nearbyStops && nearbyStops[0]) {\n      setClosestStop(nearbyStops[0].stationIDs[0]);\n    }\n  }, [nearbyStops]);\n\n  useEffect(() => {\n    if (closestStop) {\n      setCurrentBuses(dispatch, {\n        authorityCodes: closestStop.authorityCodes,\n        stationID: closestStop.stationID,\n      });\n\n      if (\n        ClosestStop_ref.current &&\n        ClosestStop_ref.current.clientWidth &&\n        ClosestStop_d_ref.current &&\n        ClosestStop_d_ref.current.clientWidth\n      ) {\n        setClosestStopWidth(ClosestStop_ref.current.clientWidth);\n        setClosestStopDivWidth(ClosestStop_d_ref.current.clientWidth);\n      }\n    }\n  }, [closestStop, pageUpdate]);\n\n  useEffect(() => {\n    if (currentBuses && closestStop) {\n      let array = [];\n      const currentBuses2 = [...currentBuses];\n\n      if (currentBuses2.length > 5) {\n        for (let i = 0; i < 5; i++) {\n          array.push(currentBuses2[i]);\n        }\n      } else {\n        array = currentBuses2;\n      }\n\n      if (array.length > 0) {\n        const remindBusesArray = new Array(array.length).fill(false);\n        for (let i = 0; i < remindBuses.length; i++) {\n          if (remindBuses[i].stationName == closestStop.stationName) {\n            for (let j = 0; j < array.length; j++) {\n              if (\n                remindBuses[i].routeUID == array[j].routeUID &&\n                remindBuses[i].direction == array[j].direction\n              ) {\n                remindBusesArray[j] = true;\n              }\n            }\n          }\n        }\n        for (let i = 0; i < array.length; i++) {\n          array[i].remindState = remindBusesArray[i];\n        }\n      } else {\n        for (let i = 0; i < array.length; i++) {\n          array[i].remindState = false;\n        }\n      }\n      setCurrentRoutesBuses(array);\n    }\n  }, [currentBuses, remindBuses.length]);\n\n  useEffect(() => {\n    if (currentRoutesBuses && currentRoutesBuses.length > 0) {\n      setCertainRoutes(dispatch, {\n        currentBuses: currentRoutesBuses,\n      });\n    }\n  }, [currentRoutesBuses]);\n\n  useEffect(() => {\n    if (certainRoutes) {\n      const array = [];\n      certainRoutes.map((el) => {\n        const id1 = getRef(el.routeName);\n        if (id1 !== null && id1 !== undefined) {\n          if (id1.current !== null && id1.current.offsetWidth > 112) {\n            array.push(true);\n          } else {\n            array.push(false);\n          }\n        } else {\n          array.push(false);\n        }\n      });\n      setOverSize(array);\n    }\n  }, [certainRoutes]);\n\n  return (\n    // <>\n    //   {loading ? (\n    //     <></>\n    //   ) : (\n    <div className={styles.sidebar_box}>\n      {closestStop ? (\n        <>\n          <div\n            className={`${styles.box_linkRow} ${styles.box__alignItemsCenter} ${styles.box__spaceBetween} ${styles.closestBox_titlebox__marginBottom}`}\n          >\n            <div className={styles.linkRow__fontSize}>最近站牌</div>\n            <Link\n              to={`${path.certainStop}?lng=${lng}&lat=${lat}&stationName=${closestStop.stationName}&stationID=${closestStop.stationID}&stationDistance=${closestStop.stationDistance}`}\n              onClick={() => {\n                setCertainRoutes(dispatch, {\n                  currentBuses: null,\n                });\n              }}\n            >\n              <FontAwesomeIcon\n                className={styles.linkRow_arrowIcon}\n                icon={faArrowRight}\n              />\n            </Link>\n          </div>\n          <div\n            className={`${styles.closestBox_box__marginBottom} ${styles.box__alignItemsCenter} ${styles.box__spaceBetween} ${styles.box__FlexWrap}`}\n          >\n            <div ref={ClosestStop_d_ref} className={styles.closestBox_stopName}>\n              <p\n                ref={ClosestStop_ref}\n                className={\n                  ClosestStopWidth > ClosestStopDivWidth\n                    ? `${styles.closestBox_stopName_marquee}`\n                    : ''\n                }\n              >\n                {closestStop.stationName}\n              </p>\n            </div>\n            <div className={styles.closestBox_stopDistance__fontSize}>\n              {closestStop.stationDistance} 公尺\n            </div>\n          </div>\n          {currentRoutesBuses && certainRoutes && remindBuses && closestStop ? (\n            <div className={styles.closestBox_BusInfo}>\n              {currentRoutesBuses.map((currentRoutesBus, index) => (\n                <div\n                  className={`${styles.closestBox_currentInfoBox} ${styles.box__alignItemsFlexStart}`}\n                  key={index}\n                >\n                  <div className={`${styles.closestBox_flexBox}`}>\n                    <div className={styles.currentInfoBox_routeInfoBox}>\n                      <div className={styles.routeInfoBox_routeName}>\n                        <p\n                          ref={setRef(currentRoutesBus.routeName)}\n                          className={\n                            overSize[index] ? `${styles.marquee_animation}` : ''\n                          }\n                        >\n                          {currentRoutesBus.routeName}\n                        </p>\n                      </div>\n                      <div className={styles.routeInfoBox_routeDirection}>\n                        {!certainRoutes[index] ||\n                        currentRoutesBus.direction == 225\n                          ? ''\n                          : currentRoutesBus.direction == 2\n                          ? '環形'\n                          : currentRoutesBus.direction == 1\n                          ? `往${certainRoutes[index].departureStopNameZh}`\n                          : `往${certainRoutes[index].destinationStopNameZh}`}\n                      </div>\n                    </div>\n                    <div\n                      className={\n                        currentRoutesBus.stopStatus === '進站中'\n                          ? `${styles.currentInfoBox_routeState} ${styles.routeState__textYellow}`\n                          : currentRoutesBus.stopStatus === '尚未發車' ||\n                            currentRoutesBus.stopStatus === '交管不停靠' ||\n                            currentRoutesBus.stopStatus === '末班車已過' ||\n                            currentRoutesBus.stopStatus === '今日未營運'\n                          ? `${styles.currentInfoBox_routeState} ${styles.routeState__textGray}`\n                          : `${styles.currentInfoBox_routeState} ${styles.routeState__textDark}`\n                      }\n                    >\n                      {currentRoutesBus.stopStatus}\n                    </div>\n                  </div>\n                  {/* 提醒按鈕區 */}\n                  <div className={styles.currentInfoBox_ButtonBox}>\n                    {!currentRoutesBus.remindState ? (\n                      <button\n                        className={`${styles.ButtonBox_Button} ${styles.ButtonBox_openButton} ${styles.box__alignItemsCenter} ${styles.box__spaceAruond}`}\n                        onClick={() => {\n                          let busesArr = [...remindBuses];\n                          busesArr.push({\n                            stationName: closestStop.stationName,\n                            routeUID: currentRoutesBus.routeUID,\n                            routeName: currentRoutesBus.routeName,\n                            direction: currentRoutesBus.direction,\n                            stopStatus: currentRoutesBus.stopStatus,\n                            departureStopNameZh:\n                              certainRoutes[index].departureStopNameZh,\n                            destinationStopNameZh:\n                              certainRoutes[index].destinationStopNameZh,\n                          });\n                          setRemindBuses(dispatch, {\n                            buses: busesArr,\n                          });\n                        }}\n                      >\n                        <FontAwesomeIcon\n                          className={styles.ButtonBox_icon}\n                          icon={farBell}\n                        />\n                        <div>開啟提醒</div>\n                      </button>\n                    ) : (\n                      <button\n                        className={`${styles.ButtonBox_Button} ${styles.ButtonBox_cancelButton} ${styles.box__alignItemsCenter} ${styles.box__spaceAruond}`}\n                        onClick={() => {\n                          let busesArr = [...remindBuses];\n                          for (let i = 0; i < busesArr.length; i++) {\n                            if (\n                              busesArr[i].stationName ==\n                                closestStop.stationName &&\n                              busesArr[i].direction ==\n                                currentRoutesBus.direction &&\n                              busesArr[i].routeUID == currentRoutesBus.routeUID\n                            ) {\n                              busesArr.splice(i, 1);\n                              i = busesArr.length - 1;\n                              setRemindBuses(dispatch, {\n                                buses: busesArr,\n                              });\n                            }\n                          }\n                        }}\n                      >\n                        <FontAwesomeIcon\n                          className={styles.ButtonBox_icon}\n                          icon={faBell}\n                        />\n                        <div>取消提醒</div>\n                      </button>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <></>\n          )}\n        </>\n      ) : (\n        <></>\n      )}\n    </div>\n    //   )}\n    // </>\n  );\n}\n\nexport default ClosestStopBox;\n","import React, { useEffect, useContext, useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport * as QueryString from 'query-string';\nimport useDynamicRefs from 'use-dynamic-refs';\n\nimport path from '../../router/path';\nimport styles from './styles.module.scss';\n\n// eslint-disable-next-line no-unused-vars\nimport { StoreContext } from '../../store/reducer';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowRight } from '@fortawesome/free-solid-svg-icons';\n\nfunction HomeNearbyStopsBox() {\n  const [getRef, setRef] = useDynamicRefs();\n  const [overSize, SetOverSize] = useState([]);\n\n  const reactlocation = useLocation();\n  const { lng, lat } = QueryString.parse(reactlocation.search);\n\n  const {\n    state: {\n      nearbyStops,\n      // requestdata: { loading },\n    },\n  } = useContext(StoreContext);\n  const [frontNearbyStops, setFrontNearbyStops] = useState([]);\n\n  useEffect(() => {\n    if (nearbyStops) {\n      // console.log(nearbyStops);\n\n      const nearbyStops2 = [...nearbyStops];\n      let frontNearbyStopsLength = 5;\n      if (nearbyStops2.length < 5) {\n        frontNearbyStopsLength = nearbyStops2.length;\n      }\n      const array = [];\n\n      for (let i = 0; i < frontNearbyStopsLength; i++) {\n        const routes = [];\n        for (let j = 0; j < nearbyStops2[i].stationIDs.length; j++) {\n          for (\n            let k = 0;\n            k < nearbyStops2[i].stationIDs[j].stationStops.length;\n            k++\n          ) {\n            for (\n              let l = 0;\n              l < nearbyStops2[i].stationIDs[j].stationStops[k].routes.length;\n              l++\n            ) {\n              let flag = true;\n              for (let m = 0; m < routes.length; m++) {\n                if (\n                  routes[m] ==\n                  nearbyStops2[i].stationIDs[j].stationStops[k].routes[l]\n                ) {\n                  flag = false;\n                  m = routes.length;\n                }\n              }\n              if (flag) {\n                routes.push(\n                  nearbyStops2[i].stationIDs[j].stationStops[k].routes[l],\n                );\n              }\n            }\n          }\n        }\n        array.push({\n          stationName: nearbyStops2[i].stationName,\n          stationRoutes: routes,\n        });\n      }\n      setFrontNearbyStops(array);\n    }\n  }, [nearbyStops]);\n\n  useEffect(() => {\n    if (frontNearbyStops.length > 0) {\n      const array = [];\n      frontNearbyStops.map((el) => {\n        const p_ref = getRef(el.stationName + '_p');\n        const div_ref = getRef(el.stationName + '_div');\n        if (p_ref !== null && p_ref !== undefined) {\n          if (\n            div_ref.current !== null &&\n            p_ref.current !== null &&\n            p_ref.current.offsetWidth > div_ref.current.offsetWidth\n          ) {\n            array.push(true);\n          } else {\n            array.push(false);\n          }\n        } else {\n          array.push(false);\n        }\n      });\n      SetOverSize(array);\n    }\n  }, [frontNearbyStops]);\n\n  return (\n    // <>\n    //   {loading ? (\n    //     <></>\n    //   ) : (\n    <div className={styles.sidebar_box}>\n      <div\n        className={`${styles.box_linkRow} ${styles.box__alignItemsCenter} ${styles.box__spaceBetween} ${styles.nearbyBox__marginBottom}`}\n      >\n        <div className={styles.linkRow__fontSize}>附近站牌</div>\n        <Link to={`${path.nearbyStops}?lng=${lng}&lat=${lat}`}>\n          <FontAwesomeIcon\n            className={styles.linkRow_arrowIcon}\n            icon={faArrowRight}\n          />\n        </Link>\n      </div>\n      {frontNearbyStops ? (\n        <>\n          {frontNearbyStops.map((nearbyStop, index) => (\n            <div className={styles.nearbyBox__marginBottom} key={index}>\n              <div\n                className={`${styles.routeStopBox_stopInfoBox} ${styles.box__alignItemsCenter} ${styles.box__spaceBetween}`}\n              >\n                <div\n                  ref={setRef(nearbyStop.stationName + '_div')}\n                  className={styles.stopInfoBox_stopName}\n                >\n                  <p\n                    ref={setRef(nearbyStop.stationName + '_p')}\n                    className={\n                      overSize[index] ? `${styles.marquee_animation}` : ''\n                    }\n                  >\n                    {nearbyStop.stationName}\n                  </p>\n                </div>\n              </div>\n              <div\n                className={`${styles.box__alignItemsCenter} ${styles.box__spaceBetween} ${styles.nearbyBox__marginBottom}`}\n              >\n                <div className={styles.routeStopBox_routeNameBox}>\n                  {nearbyStop.stationRoutes.map((routeName, index) => (\n                    <div key={index}>\n                      <div\n                        className={`${styles.routeNameBox_routeName} ${styles.box__alignItemsCenter}`}\n                      >\n                        {routeName}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                {/* <Link\n                  to={`${path.certainStop}?clickStopIndex=${index}`}\n                  onClick={() => setSelectStopIndex(dispatch, { index: index })}\n                >\n                  <FontAwesomeIcon\n                    className={styles.linkRow_arrowIcon}\n                    icon={faArrowRight}\n                  />\n                </Link> */}\n              </div>\n            </div>\n          ))}\n        </>\n      ) : (\n        <></>\n      )}\n    </div>\n    //   )}\n    // </>\n  );\n}\n\nexport default HomeNearbyStopsBox;\n","import React, { Fragment } from 'react';\nimport styles from './styles.module.scss';\n\nimport ScanBox from '../../components/ScanBox';\nimport ReserveBox from '../../components/ReserveBox';\nimport RemindBox from '../../components/RemindBox';\nimport HomeClosestStopBox from '../../components/HomeClosestStopBox';\nimport HomeNearbyStopsBox from '../../components/HomeNearbyStopsBox';\n\nfunction Home() {\n  return (\n    <Fragment>\n      <div className={styles.sidebar}>\n        <ScanBox></ScanBox>\n        <ReserveBox></ReserveBox>\n        <RemindBox></RemindBox>\n        <HomeClosestStopBox></HomeClosestStopBox>\n        <HomeNearbyStopsBox></HomeNearbyStopsBox>\n      </div>\n    </Fragment>\n  );\n}\n\nexport default Home;\n","import React, { useEffect, useContext, useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport * as QueryString from 'query-string';\n\nimport path from '../../router/path';\nimport styles from './styles.module.scss';\n\nimport { setCurrentBuses } from '../../store/actions';\nimport { StoreContext } from '../../store/reducer';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowRight } from '@fortawesome/free-solid-svg-icons';\n\nfunction NearbyStopsBox() {\n  const reactlocation = useLocation();\n  const { lng, lat } = QueryString.parse(reactlocation.search);\n\n  const {\n    state: {\n      location,\n      nearbyStops,\n      // requestdata: { loading },\n    },\n    dispatch,\n  } = useContext(StoreContext);\n\n  const [nearbyStopsName, setNearbyStopsName] = useState(null);\n  const [stationCount, setStationCount] = useState(0);\n\n  useEffect(() => {\n    setCurrentBuses(dispatch, {\n      city: null,\n      stationID: null,\n    });\n  }, []);\n\n  useEffect(() => {\n    if (nearbyStops) {\n      const nearbyStops2 = [...nearbyStops];\n      const array = [];\n      let count = 0;\n\n      for (let i = 0; i < nearbyStops2.length; i++) {\n        const routes = [];\n        for (let j = 0; j < nearbyStops2[i].stationIDs.length; j++) {\n          count++;\n          for (\n            let k = 0;\n            k < nearbyStops2[i].stationIDs[j].stationStops.length;\n            k++\n          ) {\n            for (\n              let l = 0;\n              l < nearbyStops2[i].stationIDs[j].stationStops[k].routes.length;\n              l++\n            ) {\n              let flag = true;\n              for (let m = 0; m < routes.length; m++) {\n                if (\n                  routes[m] ==\n                  nearbyStops2[i].stationIDs[j].stationStops[k].routes[l]\n                ) {\n                  flag = false;\n                  m = routes.length;\n                }\n              }\n              if (flag) {\n                routes.push(\n                  nearbyStops2[i].stationIDs[j].stationStops[k].routes[l],\n                );\n              }\n            }\n          }\n        }\n\n        array.push({\n          stationName: nearbyStops2[i].stationName,\n          stationID: nearbyStops2[i].stationIDs[0].stationID,\n          stationDistance: nearbyStops2[i].stationIDs[0].stationDistance,\n          stationRoutes: routes,\n        });\n      }\n\n      setStationCount(count);\n      setNearbyStopsName(array);\n    }\n  }, [nearbyStops]);\n\n  useEffect(() => {\n    // console.log(nearbyStopsName);\n  }, [location, stationCount, nearbyStopsName]);\n\n  return (\n    // <>\n    //   {loading ? (\n    //     <></>\n    //   ) : (\n    <div className={styles.sidebar_box}>\n      <div className={styles.nearbyBox_titleBox}>\n        <div>附近站牌</div>\n        {location && stationCount ? (\n          <div className={styles.titleBox_stopsInfo}>\n            <div>{location.city}</div>\n            <div>{location.town}</div>\n            <div>｜</div>\n            <div>{stationCount}站</div>\n          </div>\n        ) : (\n          <></>\n        )}\n      </div>\n      {nearbyStopsName && nearbyStopsName.length > 0 ? (\n        <div className={styles.nearbyBox_AllStopBox}>\n          {nearbyStopsName.map((nearbyStop, index) => (\n            <div className={styles.nearbyBox_certainStopBox} key={index}>\n              <Link\n                to={`${path.certainStop}?lng=${lng}&lat=${lat}&stationName=${nearbyStop.stationName}&stationID=${nearbyStop.stationID}&stationDistance=${nearbyStop.stationDistance}`}\n                className={styles.certainStopBox_linkSetting}\n              >\n                <div className={styles.certainStopBox_frontBox}>\n                  <div\n                    className={`${styles.routeStopBox_stopInfoBox} ${styles.box__alignItemsCenter} ${styles.box__spaceBetween}`}\n                  >\n                    <div className={styles.stopInfoBox_stopName__fontSize}>\n                      {nearbyStop.stationName}\n                    </div>\n                    <FontAwesomeIcon\n                      className={styles.linkRow_arrowIcon}\n                      icon={faArrowRight}\n                    />\n                    {/* <div className={styles.stopInfoBox_stopDistance__fontSize}>\n                      {nearbyStop.stationDistance} 公尺\n                    </div> */}\n                  </div>\n                  <div\n                    className={`${styles.box_linkRow} ${styles.box__alignItemsCenter} ${styles.box__spaceBetween}`}\n                  >\n                    <div className={styles.routeStopBox_routeNameBox}>\n                      {nearbyStop.stationRoutes.map((routeName, index) => (\n                        <div key={index}>\n                          <div\n                            className={`${styles.routeNameBox_routeName} ${styles.linkRow__fontSize} ${styles.box__alignItemsCenter}`}\n                          >\n                            {routeName}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </Link>\n            </div>\n          ))}\n        </div>\n      ) : nearbyStopsName && nearbyStopsName.length == 0 ? (\n        <div className={styles.nearbyBox_noInfoBox}>\n          <div className={styles.box__center}>\n            <div className={styles.nearbyBox_noInfoImg}></div>\n          </div>\n          <div className={styles.box__center}>\n            <div className={styles.nearbyBox_noInfoText}>\n              您的周圍沒有 附近站牌\n            </div>\n          </div>\n        </div>\n      ) : (\n        <></>\n      )}\n    </div>\n    //   )}\n    // </>\n  );\n}\n\nexport default NearbyStopsBox;\n","import React, { Fragment } from 'react';\nimport styles from './styles.module.scss';\n\nimport NearbyStopsBox from '../../components/NearbyStopsBox';\n\nfunction NearbyStops() {\n  return (\n    <Fragment>\n      <div className={styles.sidebar}>\n        <NearbyStopsBox></NearbyStopsBox>\n      </div>\n    </Fragment>\n  );\n}\n\nexport default NearbyStops;\n","import React, { useEffect, useContext, useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport * as QueryString from 'query-string';\nimport useDynamicRefs from 'use-dynamic-refs';\n\nimport path from '../../router/path';\nimport styles from './styles.module.scss';\n\nimport {\n  setSelectRouteStopsSort,\n  setSelectRouteStopsTime,\n  setSelectRouteBuses,\n  setCurrentBuses,\n  setCertainRoutes,\n  setRemindBuses,\n  setReserveBus,\n} from '../../store/actions';\nimport { StoreContext } from '../../store/reducer';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faBus,\n  faArrowAltCircleRight,\n  faRoute,\n} from '@fortawesome/free-solid-svg-icons';\nimport { faBell } from '@fortawesome/free-solid-svg-icons';\nimport { faBell as farBell } from '@fortawesome/free-regular-svg-icons';\n\nfunction CertainStopBox() {\n  const [getRef, setRef] = useDynamicRefs();\n  const [overSize, SetOverSize] = useState([]);\n\n  const reactlocation = useLocation();\n  const { lng, lat, stationID, stationName, stationDistance } =\n    QueryString.parse(reactlocation.search);\n\n  const {\n    state: {\n      location,\n      nearbyStops,\n      currentBuses,\n      certainRoutes,\n      remindBuses,\n      reserveBus,\n      // requestdata: { loading },\n    },\n    dispatch,\n  } = useContext(StoreContext);\n  const [nearbyStopsName, setNearbyStopsName] = useState(null);\n  const [currentRoutesBuses, setCurrentRoutesBuses] = useState(null);\n  const [openRoutes, setOpenRoutes] = useState('0');\n  const [pageUpdate, setPageUpdate] = useState(true);\n\n  useEffect(() => {\n    setSelectRouteStopsSort(dispatch, {\n      city: null,\n      selectRoute: null,\n    });\n    setSelectRouteStopsTime(dispatch, {\n      city: null,\n      selectRoute: null,\n    });\n    setSelectRouteBuses(dispatch, {\n      city: null,\n      selectRoute: null,\n    });\n  }, []);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setPageUpdate(!pageUpdate);\n    }, 20000);\n\n    return () => clearTimeout(timeout);\n  }, [pageUpdate]);\n\n  useEffect(() => {\n    if (nearbyStops && stationName) {\n      const nearbyStops2 = [...nearbyStops];\n      for (let i = 0; i < nearbyStops2.length; i++) {\n        if (stationName == nearbyStops2[i].stationName) {\n          setNearbyStopsName(nearbyStops2[i].stationIDs);\n          i = nearbyStops2.length;\n        }\n      }\n      setCurrentBuses(dispatch, {\n        authorityCodes: null,\n        stationID: null,\n      });\n    }\n  }, [nearbyStops, stationName]);\n\n  useEffect(() => {\n    if (nearbyStopsName && stationID) {\n      for (let i = 0; i < nearbyStopsName.length; i++) {\n        if (nearbyStopsName[i].stationID == stationID) {\n          setCurrentBuses(dispatch, {\n            authorityCodes: nearbyStopsName[i].authorityCodes,\n            stationID: stationID,\n          });\n          // setCertainRoutes(dispatch, {\n          //   currentBuses: null,\n          // });\n          i = nearbyStopsName.length;\n        }\n      }\n    }\n  }, [nearbyStopsName, stationID, pageUpdate]);\n\n  useEffect(() => {\n    if (currentBuses) {\n      setCertainRoutes(dispatch, {\n        currentBuses: currentBuses,\n      });\n\n      let currentBuses2 = [...currentBuses];\n      if (remindBuses.length > 0) {\n        let remindBusesArray = new Array(currentBuses2.length).fill(false);\n        for (let i = 0; i < remindBuses.length; i++) {\n          if (remindBuses[i].stationName == stationName) {\n            for (let j = 0; j < currentBuses2.length; j++) {\n              if (\n                remindBuses[i].routeUID == currentBuses2[j].routeUID &&\n                remindBuses[i].direction == currentBuses2[j].direction\n              ) {\n                remindBusesArray[j] = true;\n              }\n            }\n          }\n        }\n        for (let i = 0; i < currentBuses2.length; i++) {\n          currentBuses2[i].remindState = remindBusesArray[i];\n          if (\n            reserveBus &&\n            reserveBus.stationID == stationID &&\n            reserveBus.routeUID == currentBuses2[i].routeUID &&\n            reserveBus.direction == currentBuses2[i].direction\n          ) {\n            currentBuses2[i].reverseState = true;\n          } else {\n            currentBuses2[i].reverseState = false;\n          }\n        }\n      } else {\n        for (let i = 0; i < currentBuses2.length; i++) {\n          currentBuses2[i].remindState = false;\n          if (\n            reserveBus &&\n            reserveBus.stationID == stationID &&\n            reserveBus.routeUID == currentBuses2[i].routeUID &&\n            reserveBus.direction == currentBuses2[i].direction\n          ) {\n            currentBuses2[i].reverseState = true;\n          } else {\n            currentBuses2[i].reverseState = false;\n          }\n        }\n      }\n      setCurrentRoutesBuses(currentBuses2);\n    }\n  }, [currentBuses, remindBuses.length, reserveBus]);\n\n  useEffect(() => {\n    if (currentRoutesBuses && certainRoutes && currentRoutesBuses.length > 0) {\n      const array = [];\n      currentRoutesBuses.map((el) => {\n        let p_ref = getRef(el.routeName + '_p');\n        let div_ref = getRef(el.routeName + '_div');\n        if (p_ref !== null && p_ref !== undefined) {\n          if (\n            div_ref.current !== null &&\n            p_ref.current !== null &&\n            p_ref.current.offsetWidth > div_ref.current.offsetWidth\n          ) {\n            console.log(p_ref.current.offsetWidth);\n            console.log(div_ref.current.offsetWidth);\n            array.push(true);\n          } else {\n            array.push(false);\n          }\n        } else {\n          array.push(false);\n        }\n      });\n      SetOverSize(array);\n    }\n  }, [certainRoutes, currentRoutesBuses]);\n\n  return (\n    // <>\n    //   {loading ? (\n    //     <></>\n    //   ) : (\n    <div className={styles.sidebar_box}>\n      {stationName && stationDistance && location ? (\n        <div className={styles.certainStopBox_titlebox__marginBottom}>\n          <div\n            className={`${styles.box__alignItemsCenter} ${styles.box__start} ${styles.certainStopBox_stopName}`}\n          >\n            {stationName}\n          </div>\n          <div\n            className={`${styles.box__alignItemsCenter} ${styles.certainStopBox_stopInfo}`}\n          >\n            <div className={styles.stopInfo_detailBox}>\n              <div>{location.city}</div>\n              <div>{location.town}</div>\n              <div>{stationDistance} 公尺</div>\n            </div>\n            <div\n              className={`${styles.ButtonBox_Button} ${styles.Button_White} ${styles.box__alignItemsCenter}`}\n            >\n              <FontAwesomeIcon\n                className={styles.Button_icon}\n                icon={faArrowAltCircleRight}\n              />\n              <div>路線規劃</div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <div className={styles.certainStopBox_titlebox__marginBottom}></div>\n      )}\n      <div className={styles.certainStopBox_ChangeRouteBox}>\n        {nearbyStopsName && nearbyStopsName.length > 0 ? (\n          <>\n            {nearbyStopsName.map((stopName, index) => (\n              <Link\n                to={`${path.certainStop}?lng=${lng}&lat=${lat}&stationName=${stopName.stationName}&stationID=${stopName.stationID}&stationDistance=${stopName.stationDistance}`}\n                className={\n                  stopName.stationID == stationID\n                    ? `${styles.ChangeRouteBox_RouteBox} ${styles.ChangeRouteBox_RouteBoxFocus}`\n                    : `${styles.ChangeRouteBox_RouteBox}`\n                }\n                key={index}\n              >\n                {index + 1}\n              </Link>\n            ))}\n          </>\n        ) : (\n          <></>\n        )}\n      </div>\n      {currentRoutesBuses &&\n      certainRoutes &&\n      currentRoutesBuses.length > 0 &&\n      certainRoutes.length > 0 ? (\n        <div className={styles.certainStopBox_AllRouteBox}>\n          {currentRoutesBuses.map((currentRoutesBus, index) => (\n            <div className={styles.certainStopBox_certainRouteBox} key={index}>\n              <div\n                className={`${styles.certainRouteBox_frontBox} ${styles.box__alignItemsCenter}`}\n                key={index}\n                onClick={() => {\n                  setOpenRoutes(currentRoutesBus.routeName + index);\n                }}\n              >\n                <div className={styles.certainRouteBox_routeInfo}>\n                  <div\n                    ref={setRef(currentRoutesBus.routeName + 'div')}\n                    className={styles.certainRouteBox_routeNameBox}\n                  >\n                    <p\n                      ref={setRef(currentRoutesBus.routeName + 'p')}\n                      className={\n                        overSize[index]\n                          ? `${styles.marquee_animation} ${styles.certainRouteBox_routeName}`\n                          : `${styles.certainRouteBox_routeName}`\n                      }\n                    >\n                      {currentRoutesBus.routeName}\n                    </p>\n                  </div>\n                  <div className={styles.certainRouteBox_routeDirection}>\n                    {!certainRoutes[index] || currentRoutesBus.direction == 225\n                      ? ''\n                      : currentRoutesBus.direction == 2\n                      ? '環形'\n                      : currentRoutesBus.direction == 1\n                      ? `往${certainRoutes[index].departureStopNameZh}`\n                      : `往${certainRoutes[index].destinationStopNameZh}`}\n                  </div>\n                </div>\n                <div\n                  className={\n                    currentRoutesBus.stopStatus === '進站中'\n                      ? `${styles.certainRouteBox_routeState} ${styles.routeState__textYellow}`\n                      : currentRoutesBus.stopStatus === '尚未發車' ||\n                        currentRoutesBus.stopStatus === '交管不停靠' ||\n                        currentRoutesBus.stopStatus === '末班車已過' ||\n                        currentRoutesBus.stopStatus === '今日未營運'\n                      ? `${styles.certainRouteBox_routeState} ${styles.routeState__textGray}`\n                      : `${styles.certainRouteBox_routeState} ${styles.routeState__textDark}`\n                  }\n                >\n                  {currentRoutesBus.stopStatus}\n                </div>\n              </div>\n\n              <div\n                className={\n                  openRoutes == currentRoutesBus.routeName + index\n                    ? `${styles.box__alignItemsCenter} ${styles.box__spaceBetween} ${styles.certainRouteBox_ButtonBox}`\n                    : `${styles.box_displayNone}`\n                }\n              >\n                {!currentRoutesBus.reverseState ? (\n                  <button\n                    className={`${styles.ButtonBox_Button} ${styles.Button_openButton} ${styles.box__alignItemsCenter}`}\n                    onClick={() => {\n                      setReserveBus(dispatch, {\n                        bus: {\n                          stationID,\n                          stationName,\n                          routeUID: currentRoutesBus.routeUID,\n                          routeName: currentRoutesBus.routeName,\n                          direction: currentRoutesBus.direction,\n                          stopStatus: currentRoutesBus.stopStatus,\n                          departureStopNameZh:\n                            certainRoutes[index].departureStopNameZh,\n                          destinationStopNameZh:\n                            certainRoutes[index].destinationStopNameZh,\n                        },\n                      });\n                    }}\n                  >\n                    <FontAwesomeIcon\n                      className={styles.Button_icon}\n                      icon={faBus}\n                    />\n                    <div>預約上車</div>\n                  </button>\n                ) : (\n                  <button\n                    className={`${styles.ButtonBox_Button} ${styles.Button_cancelButton} ${styles.box__alignItemsCenter}`}\n                    onClick={() => {\n                      setReserveBus(dispatch, {\n                        buses: null,\n                      });\n                    }}\n                  >\n                    <FontAwesomeIcon\n                      className={styles.ButtonBox_icon}\n                      icon={faBus}\n                    />\n                    <div>取消預約</div>\n                  </button>\n                )}\n\n                {!currentRoutesBus.remindState ? (\n                  <button\n                    className={`${styles.ButtonBox_Button} ${styles.Button_openButton} ${styles.box__alignItemsCenter}`}\n                    onClick={() => {\n                      let busesArr = [...remindBuses];\n                      busesArr.push({\n                        stationName,\n                        routeUID: currentRoutesBus.routeUID,\n                        routeName: currentRoutesBus.routeName,\n                        direction: currentRoutesBus.direction,\n                        stopStatus: currentRoutesBus.stopStatus,\n                        departureStopNameZh:\n                          certainRoutes[index].departureStopNameZh,\n                        destinationStopNameZh:\n                          certainRoutes[index].destinationStopNameZh,\n                      });\n                      setRemindBuses(dispatch, {\n                        buses: busesArr,\n                      });\n                    }}\n                  >\n                    <FontAwesomeIcon\n                      className={styles.Button_icon}\n                      icon={farBell}\n                    />\n                    <div>開啟提醒</div>\n                  </button>\n                ) : (\n                  <button\n                    className={`${styles.ButtonBox_Button} ${styles.Button_cancelButton} ${styles.box__alignItemsCenter}`}\n                    onClick={() => {\n                      let busesArr = [...remindBuses];\n                      for (let i = 0; i < busesArr.length; i++) {\n                        if (\n                          busesArr[i].stationName == stationName &&\n                          busesArr[i].direction == currentRoutesBus.direction &&\n                          busesArr[i].routeUID == currentRoutesBus.routeUID\n                        ) {\n                          busesArr.splice(i, 1);\n                          i = busesArr.length - 1;\n                          setRemindBuses(dispatch, {\n                            buses: busesArr,\n                          });\n                        }\n                      }\n                    }}\n                  >\n                    <FontAwesomeIcon\n                      className={styles.ButtonBox_icon}\n                      icon={faBell}\n                    />\n                    <div>取消提醒</div>\n                  </button>\n                )}\n                <Link\n                  to={\n                    certainRoutes[index]\n                      ? `${path.certainRoute}?lng=${lng}&lat=${lat}&stationID=${stationID}&routeName=${currentRoutesBus.routeName}&routeUID=${currentRoutesBus.routeUID}&direction=${currentRoutesBus.direction}&departureStopNameZh=${certainRoutes[index].departureStopNameZh}&destinationStopNameZh=${certainRoutes[index].destinationStopNameZh}`\n                      : ''\n                  }\n                  className={`${styles.ButtonBox_Button} ${styles.Button_openButton} ${styles.box__alignItemsCenter} ${styles.certainRouteBox_linkSetting}`}\n                >\n                  <FontAwesomeIcon\n                    className={styles.Button_icon}\n                    icon={faRoute}\n                  />\n                  <div>查看路線</div>\n                </Link>\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : currentRoutesBuses &&\n        certainRoutes &&\n        currentRoutesBuses.length == 0 &&\n        certainRoutes.length == 0 ? (\n        <div className={styles.certainStopBox_noInfoBox}>\n          <div className={styles.box__center}>\n            <div className={styles.certainStopBox_noInfoImg}></div>\n          </div>\n          <div className={styles.box__center}>\n            <div className={styles.certainStopBox_noInfoText}>\n              此站牌沒有 公車路線\n            </div>\n          </div>\n        </div>\n      ) : (\n        <></>\n      )}\n    </div>\n    //   )}\n    // </>\n  );\n}\n\nexport default CertainStopBox;\n","import React, { Fragment } from 'react';\nimport styles from './styles.module.scss';\n\nimport CertainStopBox from '../../components/CertainStopBox';\n\nfunction CertainStop() {\n  return (\n    <Fragment>\n      <div className={styles.sidebar}>\n        <CertainStopBox></CertainStopBox>\n      </div>\n    </Fragment>\n  );\n}\n\nexport default CertainStop;\n","import React, { useEffect, useContext, useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport * as QueryString from 'query-string';\n\nimport path from '../../router/path';\nimport styles from './styles.module.scss';\n\nimport cityJson from '../../asset/json/city.json';\n\nimport {\n  setCurrentBuses,\n  setSelectRouteStopsSort,\n  setSelectRouteStopsTime,\n  setSelectRouteBuses,\n  setRemindBuses,\n  setReserveBus,\n  setVehicle,\n} from '../../store/actions';\nimport { StoreContext } from '../../store/reducer';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faBus,\n  faArrowAltCircleRight,\n  faInfoCircle,\n} from '@fortawesome/free-solid-svg-icons';\nimport { faBell } from '@fortawesome/free-solid-svg-icons';\nimport { faBell as farBell } from '@fortawesome/free-regular-svg-icons';\nfunction CertainRouteBox() {\n  const [openStops, setOpenStops] = useState('0');\n  const reactlocation = useLocation();\n  const {\n    lng,\n    lat,\n    stationID,\n    routeName,\n    routeUID,\n    direction,\n    departureStopNameZh,\n    destinationStopNameZh,\n  } = QueryString.parse(reactlocation.search);\n\n  const {\n    state: {\n      selectRouteStopsSort,\n      selectRouteStopsTime,\n      selectRouteBuses,\n      remindBuses,\n      reserveBus,\n      vehicle,\n      // requestdata: { loading },\n    },\n    dispatch,\n  } = useContext(StoreContext);\n  const [stopsArr, setStopsArr] = useState(null);\n  const [stopsTimeArr, setStopsTimeArr] = useState(null);\n  const [routeBusesArr, setRouteBusesArr] = useState(null);\n  const [directionStops, setDirectionStops] = useState(null);\n  const [pageUpdate, setPageUpdate] = useState(true);\n  const [city, setCity] = useState(null);\n\n  useEffect(() => {\n    setCurrentBuses(dispatch, {\n      city: null,\n      stationID: null,\n    });\n  }, []);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setPageUpdate(!pageUpdate);\n    }, 20000);\n\n    return () => clearTimeout(timeout);\n  }, [pageUpdate]);\n\n  useEffect(() => {\n    for (let i = 0; i < cityJson.length; i++) {\n      if (cityJson[i].AuthorityCode === routeUID.substring(0, 3)) {\n        if (!city) {\n          setCity(cityJson[i].cityEn);\n        } else if (!vehicle[city]) {\n          setVehicle(dispatch, {\n            vehicle,\n            cityEn: cityJson[i].cityEn,\n          });\n        } else if (routeName && routeUID) {\n          setSelectRouteStopsSort(dispatch, {\n            selectRoute: {\n              routeName,\n              routeUID,\n            },\n          });\n        }\n        i == cityJson.length;\n      }\n    }\n  }, [routeName, routeUID, pageUpdate, city && vehicle[city]]);\n\n  useEffect(() => {\n    if (selectRouteStopsSort) {\n      const selectRouteStopsSort2 = [...selectRouteStopsSort];\n      for (let i = 0; i < selectRouteStopsSort2.length; i++) {\n        if (selectRouteStopsSort2[i].direction == direction) {\n          setStopsArr(selectRouteStopsSort2[i].stops);\n          i = selectRouteStopsSort2.length;\n        }\n      }\n    }\n  }, [selectRouteStopsSort, direction]);\n\n  useEffect(() => {\n    if (stopsArr) {\n      setSelectRouteStopsTime(dispatch, {\n        selectRoute: {\n          routeName,\n          routeUID,\n        },\n      });\n    }\n  }, [stopsArr]);\n\n  useEffect(() => {\n    if (selectRouteStopsTime && stopsArr && stopsArr.length > 0) {\n      let stopsTimeArr2 = [];\n      const selectRouteStopsTime2 = [...selectRouteStopsTime];\n      for (let i = 0; i < stopsArr.length; i++) {\n        for (let j = 0; j < selectRouteStopsTime2.length; j++) {\n          if (\n            selectRouteStopsTime2[j].direction == direction &&\n            stopsArr[i].StopUID == selectRouteStopsTime2[j].stopUID\n          ) {\n            stopsTimeArr2.push({\n              stopUID: stopsArr[i].StopUID,\n              // stationID: stopsArr[i].StationID,\n              stopPosition: stopsArr[i].StopPosition,\n              stopName: stopsArr[i].StopName,\n              stopBoarding: stopsArr[i].StopBoarding,\n              stopStatus:\n                Math.round(selectRouteStopsTime2[j].estimateTime / 60) <= 1\n                  ? '進站中'\n                  : Math.round(selectRouteStopsTime2[j].estimateTime / 60) > 1\n                  ? `${Math.round(\n                      selectRouteStopsTime2[j].estimateTime / 60,\n                    )} 分`\n                  : selectRouteStopsTime2[j].stopStatus == 4\n                  ? '今日未營運'\n                  : selectRouteStopsTime2[j].stopStatus == 3\n                  ? '末班車已過'\n                  : selectRouteStopsTime2[j].stopStatus == 2\n                  ? '交管不停靠'\n                  : '尚未發車',\n              remindState: false,\n              buses: [],\n              // busEstimateTime: selectRouteStopsTime[j].estimateTime,\n              // busPlateNumb: selectRouteStopsTime[j].plateNumb,\n            });\n            j = selectRouteStopsTime2.length - 1;\n          }\n          if (\n            i == stopsArr.length - 1 &&\n            j == selectRouteStopsTime2.length - 1\n          ) {\n            if (remindBuses.length > 0) {\n              let remindBusesArray = new Array(stopsTimeArr2.length).fill(\n                false,\n              );\n              for (let i = 0; i < remindBuses.length; i++) {\n                if (\n                  remindBuses[i].routeUID == routeUID &&\n                  remindBuses[i].direction == direction\n                ) {\n                  for (let j = 0; j < stopsTimeArr2.length; j++) {\n                    if (\n                      remindBuses[i].stationName ==\n                      stopsTimeArr2[j].stopName.Zh_tw\n                    ) {\n                      remindBusesArray[j] = true;\n                    }\n                  }\n                }\n              }\n              for (let i = 0; i < stopsTimeArr2.length; i++) {\n                stopsTimeArr2[i].remindState = remindBusesArray[i];\n                if (\n                  reserveBus &&\n                  !reserveBus.stationID &&\n                  reserveBus.routeUID == routeUID &&\n                  reserveBus.direction == direction &&\n                  reserveBus.stationName == stopsTimeArr2[i].stopName.Zh_tw\n                ) {\n                  stopsTimeArr2[i].reverseState = true;\n                } else {\n                  stopsTimeArr2[i].reverseState = false;\n                }\n              }\n            } else {\n              for (let i = 0; i < stopsTimeArr2.length; i++) {\n                if (\n                  reserveBus &&\n                  !reserveBus.stationID &&\n                  reserveBus.routeUID == routeUID &&\n                  reserveBus.direction == direction &&\n                  reserveBus.stationName == stopsTimeArr2[i].stopName.Zh_tw\n                ) {\n                  stopsTimeArr2[i].reverseState = true;\n                } else {\n                  stopsTimeArr2[i].reverseState = false;\n                }\n              }\n            }\n            setStopsTimeArr(stopsTimeArr2);\n          }\n        }\n      }\n    }\n  }, [selectRouteStopsTime, remindBuses.length, reserveBus]);\n\n  useEffect(() => {\n    if (stopsTimeArr) {\n      setSelectRouteBuses(dispatch, {\n        selectRoute: {\n          routeName,\n          routeUID,\n        },\n      });\n    }\n  }, [stopsTimeArr]);\n\n  useEffect(() => {\n    if (selectRouteBuses) {\n      const selectRouteBuses2 = [...selectRouteBuses];\n      if (selectRouteBuses2.length > 0) {\n        let routeBusesArr2 = [];\n        for (let i = 0; i < selectRouteBuses2.length; i++) {\n          if (selectRouteBuses2[i].direction == direction) {\n            routeBusesArr2.push(selectRouteBuses2[i]);\n          }\n          if (i == selectRouteBuses2.length - 1) {\n            if (routeBusesArr2.length > 0) {\n              setRouteBusesArr(routeBusesArr2);\n            } else {\n              setRouteBusesArr(-1);\n            }\n          }\n        }\n      } else {\n        setRouteBusesArr(-1);\n      }\n    }\n  }, [selectRouteBuses]);\n\n  useEffect(() => {\n    if (stopsTimeArr && stopsTimeArr.length > 0 && routeBusesArr) {\n      if (routeBusesArr == -1) {\n        setDirectionStops(stopsTimeArr);\n      } else if (routeBusesArr.length > 0) {\n        let directionStops2 = stopsTimeArr;\n        let routeBusesArr2 = routeBusesArr;\n\n        for (let i = 0; i < stopsTimeArr.length; i++) {\n          for (let j = 0; j < routeBusesArr2.length; j++) {\n            if (\n              stopsTimeArr[i].stopUID == routeBusesArr2[j].stopUID &&\n              vehicle &&\n              vehicle[city]\n            ) {\n              let index = i;\n              if (!routeBusesArr2[j].a2EventType && i < stopsTimeArr.length) {\n                index = i + 1;\n              }\n\n              const found = vehicle[city].find(\n                (element) => element.PlateNumb == routeBusesArr2[j].plateNumb,\n              );\n              if (found) {\n                directionStops2[index].buses.push({\n                  plateNumb: routeBusesArr2[j].plateNumb,\n                  busStatus: routeBusesArr2[j].busStatus,\n                  dutyStatus: routeBusesArr2[j].dutyStatus,\n                  stopSequence: routeBusesArr2[j].stopSequence,\n                  vehicleType: found.VehicleType,\n                });\n              } else {\n                // 暫定\n                directionStops2[index].buses.push({\n                  plateNumb: routeBusesArr2[j].plateNumb,\n                  busStatus: routeBusesArr2[j].busStatus,\n                  dutyStatus: routeBusesArr2[j].dutyStatus,\n                  stopSequence: routeBusesArr2[j].stopSequence,\n                  vehicleType: 0,\n                });\n              }\n            }\n            if (i == stopsTimeArr.length - 1 && j == routeBusesArr.length - 1) {\n              setDirectionStops(directionStops2);\n            }\n          }\n        }\n      }\n    }\n  }, [routeBusesArr]);\n\n  useEffect(() => {\n    // console.log(directionStops);\n  }, [directionStops, departureStopNameZh, destinationStopNameZh]);\n\n  return (\n    // <>\n    //   {loading ? (\n    //     <></>\n    //   ) : (\n    <div className={styles.sidebar_box}>\n      {directionStops &&\n      selectRouteStopsSort &&\n      routeName &&\n      departureStopNameZh &&\n      destinationStopNameZh ? (\n        <div className={styles.topBox_padding}>\n          <div\n            className={`${styles.box__alignItemsCenter} ${styles.box__start} ${styles.certainRouteBox_titleBox}`}\n          >\n            {routeName}\n          </div>\n          <div\n            className={`${styles.box__alignItemsCenter} ${styles.certainRouteBox_routeInfo} ${styles.box__spaceBetween}`}\n          >\n            <div className={styles.routeInfo_detailBox}>\n              <div>{departureStopNameZh}</div>\n              <div>－</div>\n              <div>{destinationStopNameZh}</div>\n              <div>｜</div>\n              <div>{directionStops.length}站</div>\n            </div>\n            <div\n              className={`${styles.ButtonBox_Button} ${styles.Button_White_outline} ${styles.box__alignItemsCenter}`}\n            >\n              <FontAwesomeIcon\n                className={styles.Button_icon}\n                icon={faInfoCircle}\n              />\n              <div>路線規劃</div>\n            </div>\n          </div>\n          <div\n            className={`${styles.certainRouteBox_buttonBox} ${styles.box__spaceBetween}`}\n          >\n            {selectRouteStopsSort.map((stop, index) => (\n              <Link\n                to={`${path.certainRoute}?lng=${lng}&lat=${lat}&stationID=${stationID}&routeName=${routeName}&routeUID=${routeUID}&direction=${stop.direction}&departureStopNameZh=${departureStopNameZh}&destinationStopNameZh=${destinationStopNameZh}`}\n                className={\n                  stop.direction == direction\n                    ? `${styles.box__alignItemsCenter} ${styles.box__center} ${styles.buttonBox_button} ${styles.buttonBox_buttonFocus}`\n                    : `${styles.box__alignItemsCenter} ${styles.box__center} ${styles.buttonBox_button}`\n                }\n                key={`${stop.routeUID}-${index}`}\n              >\n                {stop.direction\n                  ? `往${departureStopNameZh}`\n                  : `往${destinationStopNameZh}`}\n              </Link>\n            ))}\n          </div>\n        </div>\n      ) : (\n        <div className={styles.topBox_padding}>\n          <div\n            className={`${styles.box__alignItemsCenter} ${styles.box__start} ${styles.certainRouteBox_titleBox}`}\n          ></div>\n          <div\n            className={`${styles.box__alignItemsCenter} ${styles.certainRouteBox_routeInfo} ${styles.box__spaceBetween}`}\n          ></div>\n        </div>\n      )}\n      {directionStops && directionStops.length > 0 ? (\n        <div\n          className={`${styles.bottomBox_padding} ${styles.box__spaceBetween}`}\n        >\n          <div className={styles.certainRouteBox_routeStopBox}>\n            {directionStops.map((stop, index) => (\n              <div\n                className={styles.certainRouteBox_routeInfoBox}\n                key={`${stop.stopUID}-1-${index}`}\n              >\n                <div\n                  className={styles.routeStopBox_stopInfoBox}\n                  id={stop.stopUID}\n                  onClick={() => {\n                    setOpenStops(stop.stopUID);\n                  }}\n                >\n                  <div\n                    className={\n                      stop.stopStatus === '進站中'\n                        ? `${styles.box__alignItemsCenter} ${styles.box__center} ${styles.stopInfoBox_busStatus} ${styles.routeState__textYellow}`\n                        : stop.stopStatus === '尚未發車' ||\n                          stop.stopStatus === '交管不停靠' ||\n                          stop.stopStatus === '末班車已過' ||\n                          stop.stopStatus === '今日未營運'\n                        ? `${styles.box__alignItemsCenter} ${styles.box__center} ${styles.stopInfoBox_busStatus} ${styles.routeState__textGray}`\n                        : `${styles.box__alignItemsCenter} ${styles.box__center} ${styles.stopInfoBox_busStatus} ${styles.routeState__textDark}`\n                    }\n                  >\n                    {stop.stopStatus}\n                  </div>\n                  <div\n                    className={\n                      openStops === stop.stopUID\n                        ? `${styles.stopInfoBox_stopName_open}`\n                        : '' +\n                          `${styles.box__alignItemsCenter} ${styles.box__start} ${styles.stopInfoBox_stopName}`\n                    }\n                  >\n                    {stop.stopName.Zh_tw}\n                  </div>\n                </div>\n                <div\n                  className={\n                    openStops === stop.stopUID\n                      ? `${styles.box__alignItemsCenter} ${styles.box__spaceBetween} ${styles.stopInfoBox_ButtonBox}`\n                      : `${styles.stopInfoBox_ButtonBox_close}`\n                  }\n                >\n                  {!stop.reverseState ? (\n                    <button\n                      className={`${styles.ButtonBox_Button} ${styles.Button_openButton} ${styles.box__alignItemsCenter}`}\n                      onClick={() => {\n                        setReserveBus(dispatch, {\n                          bus: {\n                            direction,\n                            routeUID,\n                            routeName,\n                            stopStatus: stop.stopStatus,\n                            departureStopNameZh,\n                            destinationStopNameZh,\n                            stationName: stop.stopName.Zh_tw,\n                          },\n                        });\n                      }}\n                    >\n                      <FontAwesomeIcon\n                        className={styles.Button_icon}\n                        icon={faBus}\n                      />\n                      <div>預約下車</div>\n                    </button>\n                  ) : (\n                    <button\n                      className={`${styles.ButtonBox_Button} ${styles.Button_cancelButton} ${styles.box__alignItemsCenter}`}\n                      onClick={() => {\n                        setReserveBus(dispatch, {\n                          bus: null,\n                        });\n                      }}\n                    >\n                      <FontAwesomeIcon\n                        className={styles.ButtonBox_icon}\n                        icon={faBus}\n                      />\n                      <div>取消預約</div>\n                    </button>\n                  )}\n                  {!stop.remindState ? (\n                    <button\n                      className={`${styles.ButtonBox_Button} ${styles.Button_openButton} ${styles.box__alignItemsCenter}`}\n                      onClick={() => {\n                        let busesArr = [...remindBuses];\n                        busesArr.push({\n                          stationName: stop.stopName.Zh_tw,\n                          routeUID,\n                          routeName,\n                          direction,\n                          stopStatus: stop.stopStatus,\n                          departureStopNameZh,\n                          destinationStopNameZh,\n                        });\n                        setRemindBuses(dispatch, {\n                          buses: busesArr,\n                        });\n                      }}\n                    >\n                      <FontAwesomeIcon\n                        className={styles.Button_icon}\n                        icon={farBell}\n                      />\n                      <div>開啟提醒</div>\n                    </button>\n                  ) : (\n                    <button\n                      className={`${styles.ButtonBox_Button} ${styles.Button_cancelButton} ${styles.box__alignItemsCenter}`}\n                      onClick={() => {\n                        let busesArr = [...remindBuses];\n                        for (let i = 0; i < busesArr.length; i++) {\n                          if (\n                            busesArr[i].direction == direction &&\n                            busesArr[i].routeUID == routeUID &&\n                            busesArr[i].stationName == stop.stopName.Zh_tw\n                          ) {\n                            busesArr.splice(i, 1);\n                            i = busesArr.length - 1;\n                            setRemindBuses(dispatch, {\n                              buses: busesArr,\n                            });\n                          }\n                        }\n                      }}\n                    >\n                      <FontAwesomeIcon\n                        className={styles.Button_icon}\n                        icon={faBell}\n                      />\n                      <div>取消提醒</div>\n                    </button>\n                  )}\n                  <div\n                    className={`${styles.ButtonBox_Button} ${styles.Button_openButton} ${styles.box__alignItemsCenter}`}\n                  >\n                    <FontAwesomeIcon\n                      className={styles.Button_icon}\n                      icon={faArrowAltCircleRight}\n                    />\n                    <div>路線規劃</div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n          <div className={styles.certainRouteBox_routeDotBox}>\n            <div className={styles.routeDotBox_routeLine}></div>\n            {directionStops.map((stop, index) => (\n              <div\n                className={\n                  openStops === stop.stopUID\n                    ? `${styles.box__alignItemsStart} ${styles.box__center} ${styles.routeDotBox_stopCircleBox} ${styles.routeDotBox_stopCircleBox_open}`\n                    : `${styles.box__alignItemsCenter} ${styles.box__center} ${styles.routeDotBox_stopCircleBox}`\n                }\n                key={`${stop.stopUID}-2-${index}`}\n              >\n                <div\n                  className={\n                    stop.buses.length > 0\n                      ? `${styles.stopCircleBox_stopCircle} ${styles.backgroundColor_B}`\n                      : `${styles.stopCircleBox_stopCircle} ${styles.backgroundColor_W}`\n                  }\n                >\n                  {stop.buses.length > 0 ? (\n                    <div className={`${styles.stopCircle_plateNumb}`}>\n                      {stop.buses.map((bus, index) => (\n                        <div key={`${bus.plateNumb}-${index}-${direction}`}>\n                          <div className={styles.box__center}>\n                            {bus.vehicleType == 1 || bus.vehicleType == 2 ? (\n                              <div\n                                className={\n                                  index == 0 && index == stop.buses.length - 1\n                                    ? `${styles.plateNumb_icon} ${styles.icon_topLeft_radius} ${styles.icon_bottomLeft_radius}`\n                                    : index == 0\n                                    ? `${styles.plateNumb_icon} ${styles.icon_topLeft_radius}`\n                                    : index == stop.buses.length - 1\n                                    ? `${styles.plateNumb_icon} ${styles.icon_bottomLeft_radius}`\n                                    : styles.plateNumb_icon\n                                }\n                              >\n                                <FontAwesomeIcon icon={farBell} />\n                              </div>\n                            ) : (\n                              <></>\n                            )}\n                            <div className={styles.plateNumb_text}>\n                              {bus.plateNumb}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <></>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      ) : (\n        <></>\n      )}\n    </div>\n    //   )}\n    // </>\n  );\n}\n\nexport default CertainRouteBox;\n","import React, { Fragment } from 'react';\nimport styles from './styles.module.scss';\n\nimport CertainRouteBox from '../../components/CertainRouteBox';\n\nfunction CertainRoute() {\n  return (\n    <Fragment>\n      <div className={styles.sidebar}>\n        <CertainRouteBox></CertainRouteBox>\n      </div>\n    </Fragment>\n  );\n}\n\nexport default CertainRoute;\n","import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport BarcodeScannerComponent from 'react-qr-barcode-scanner';\n\n// import path from '../../router/path';\nimport styles from './styles.module.scss';\n\nfunction QrcodeScanner() {\n  const navigate = useNavigate();\n  const [qrdata, setQrData] = useState('No result');\n  return (\n    <div className={styles.sidebar_box}>\n      <BarcodeScannerComponent\n        width={'100%'}\n        height={'100%'}\n        onUpdate={(err, result) => {\n          if (result) {\n            setQrData(result.text);\n            navigate(result.text);\n          } else {\n            setQrData('Not Found');\n          }\n        }}\n      />\n      <p>{qrdata}</p>\n    </div>\n  );\n}\n\nexport default QrcodeScanner;\n","import React, { Fragment } from 'react';\nimport styles from './styles.module.scss';\n\nimport QrcodeScanner from '../../components/QrcodeScanner';\n\nfunction ScanQrcode() {\n  return (\n    <Fragment>\n      <div className={styles.sidebar}>\n        <QrcodeScanner></QrcodeScanner>\n      </div>\n    </Fragment>\n  );\n}\n\nexport default ScanQrcode;\n","//Firebase\nimport { initializeApp } from 'firebase/app';\n// import { getAnalytics } from 'firebase/analytics';\nimport { getMessaging, getToken, onMessage } from 'firebase/messaging';\n\n//Firebase configuration\nconst firebaseConfig = {\n  apiKey: 'AIzaSyCuNSt10JtORrzP3Pq_D0nzs4BUouHm0NI',\n  authDomain: 'babago-noti.firebaseapp.com',\n  projectId: 'babago-noti',\n  storageBucket: 'babago-noti.appspot.com',\n  messagingSenderId: '127721117499',\n  appId: '1:127721117499:web:48b56d8aea4e31f1d5c91e',\n  measurementId: 'G-M4R7NFGZB0',\n};\n\ninitializeApp(firebaseConfig);\nconst firebaseApp = initializeApp(firebaseConfig);\nconst messaging = getMessaging(firebaseApp);\nconst publicKey =\n  'BJhB-CwmACWUjwyfpVFXeTKMQ5O2GeBAcy7u3Js7SA3Lw4XmipfUiStp1DcbsuhzEzuYCdJBVvGTXmDDWpcAq1c';\n\nexport const fetchToken = (setTokenFound) => {\n  return getToken(messaging, {\n    vapidKey: publicKey,\n  })\n    .then((currentToken) => {\n      if (currentToken) {\n        console.log('current token for client: ', currentToken);\n        setTokenFound(true);\n        // Track the token -> client mapping, by sending to backend server\n        // show on the UI that permission is secured\n      } else {\n        console.log(\n          'No registration token available. Request permission to generate one.',\n        );\n        setTokenFound(false);\n        // shows on the UI that permission is required\n      }\n    })\n    .catch((err) => {\n      console.log('An error occurred while retrieving token. ', err);\n      // catch error while creating client token\n    });\n};\n\nexport const onMessageListener = () =>\n  new Promise((resolve) => {\n    onMessage(messaging, (payload) => {\n      resolve(payload);\n    });\n  });\n","import { React, useState, useEffect } from 'react';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\n\nimport { StoreProvider } from '../store/reducer';\nimport styles from './styles.module.scss';\n\nimport path from './path';\n\nimport Nav from '../components/Nav';\nimport Map from '../components/Map';\n\nimport HomePage from '../sidebar/Home';\nimport NearbyStopsPage from '../sidebar/NearbyStops';\nimport CertainStopPage from '../sidebar/CertainStop';\nimport CertainRoutePage from '../sidebar/CertainRoute';\nimport ScanQrcodePage from '../sidebar/ScanQrcode';\n\n//firebase\nimport { fetchToken, onMessageListener } from '../store/firebase';\n\nconst Router = () => {\n  //firebase\n  const [isTokenFound, setTokenFound] = useState(false);\n  const [notification, setNotification] = useState({ title: '', body: '' });\n  fetchToken(setTokenFound);\n\n  onMessageListener()\n    .then((payload) => {\n      setNotification({\n        title: payload.data.title,\n        body: payload.data.body,\n      });\n      console.log(payload);\n    })\n    .catch((err) => console.log('failed: ', err));\n\n  useEffect(() => {\n    setNotification({\n      title: '潘佑萱',\n      body: '陳穎融',\n    });\n  }, [isTokenFound]);\n\n  useEffect(() => {\n    console.log(notification);\n  }, [notification]);\n  return (\n    <StoreProvider>\n      <BrowserRouter>\n        <div className={styles.container}>\n          <Nav></Nav>\n          <Routes>\n            <Route exact path={path.home} element={<HomePage />} />\n            <Route\n              exact\n              path={path.certainStop}\n              element={<CertainStopPage />}\n            />\n            <Route\n              exact\n              path={path.certainRoute}\n              element={<CertainRoutePage />}\n            />\n            <Route\n              exact\n              path={path.nearbyStops}\n              element={<NearbyStopsPage />}\n            />\n            <Route exact path={path.scanQrcode} element={<ScanQrcodePage />} />\n          </Routes>\n          <Map></Map>\n        </div>\n      </BrowserRouter>\n    </StoreProvider>\n  );\n};\n\nexport default Router;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './global.scss';\nimport Router from './router';\n\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"map\":\"styles_map__1oGq-\",\"selectIcon\":\"styles_selectIcon__1Dgzu\",\"currentIcon\":\"styles_currentIcon__2ON-p\",\"tooltip\":\"styles_tooltip__19_Hv\",\"tooltip_rowBox\":\"styles_tooltip_rowBox__2uPkB\",\"rowBox_titleText\":\"styles_rowBox_titleText__vwZOT\",\"rowBox_stopDistance\":\"styles_rowBox_stopDistance__bCuRg\",\"rowBox__marginRight\":\"styles_rowBox__marginRight__1IW_5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar_box\":\"styles_sidebar_box___ziiQ\",\"box__alignItemsCenter\":\"styles_box__alignItemsCenter__1GxU0\",\"box__center\":\"styles_box__center__CRBho\",\"box__start\":\"styles_box__start__2jzPH\",\"box__spaceBetween\":\"styles_box__spaceBetween__39KM7\",\"box_displayNone\":\"styles_box_displayNone__17aPX\",\"certainStopBox_titlebox__marginBottom\":\"styles_certainStopBox_titlebox__marginBottom__1SaD0\",\"certainStopBox_stopName\":\"styles_certainStopBox_stopName__28OM4\",\"certainStopBox_stopInfo\":\"styles_certainStopBox_stopInfo__B0yqB\",\"stopInfo_detailBox\":\"styles_stopInfo_detailBox__1aVx7\",\"certainStopBox_ChangeRouteBox\":\"styles_certainStopBox_ChangeRouteBox__1wqCL\",\"ChangeRouteBox_RouteBox\":\"styles_ChangeRouteBox_RouteBox__1ZMEQ\",\"ChangeRouteBox_RouteBoxFocus\":\"styles_ChangeRouteBox_RouteBoxFocus__dNWDE\",\"certainStopBox_AllRouteBox\":\"styles_certainStopBox_AllRouteBox__2gKaq\",\"certainRouteBox_linkSetting\":\"styles_certainRouteBox_linkSetting__q3TfF\",\"certainStopBox_certainRouteBox\":\"styles_certainStopBox_certainRouteBox__25b90\",\"certainRouteBox_frontBox\":\"styles_certainRouteBox_frontBox__3cYFS\",\"certainRouteBox_routeInfo\":\"styles_certainRouteBox_routeInfo__1AvOE\",\"certainRouteBox_routeNameBox\":\"styles_certainRouteBox_routeNameBox__5aVZZ\",\"certainRouteBox_routeName\":\"styles_certainRouteBox_routeName__2sga_\",\"certainRouteBox_routeDirection\":\"styles_certainRouteBox_routeDirection__1foym\",\"certainRouteBox_routeState\":\"styles_certainRouteBox_routeState__W6v56\",\"routeState__textGray\":\"styles_routeState__textGray__YUo22\",\"routeState__textYellow\":\"styles_routeState__textYellow__36n99\",\"routeState__textDark\":\"styles_routeState__textDark__3tbKP\",\"certainRouteBox_arrowIcon\":\"styles_certainRouteBox_arrowIcon__2isb_\",\"certainRouteBox_ButtonBox\":\"styles_certainRouteBox_ButtonBox__b85d3\",\"ButtonBox_Button\":\"styles_ButtonBox_Button__1ys4K\",\"Button_White\":\"styles_Button_White__3kInX\",\"Button_openButton\":\"styles_Button_openButton__uValK\",\"Button_cancelButton\":\"styles_Button_cancelButton__kEgCx\",\"Button_icon\":\"styles_Button_icon__l6qoM\",\"marquee_animation\":\"styles_marquee_animation__14mX7\",\"marquee\":\"styles_marquee__1cBix\",\"certainStopBox_noInfoBox\":\"styles_certainStopBox_noInfoBox__rgcVq\",\"certainStopBox_noInfoImg\":\"styles_certainStopBox_noInfoImg__2_dVe\",\"certainStopBox_noInfoText\":\"styles_certainStopBox_noInfoText__1S0gQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar_box\":\"styles_sidebar_box__22vbR\",\"box__alignItemsCenter\":\"styles_box__alignItemsCenter__6YgNe\",\"box__center\":\"styles_box__center__21RY_\",\"reserveBox\":\"styles_reserveBox__37X8c\",\"box__icon\":\"styles_box__icon__88u8R\",\"box__word\":\"styles_box__word__2_nHD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box__spaceBetween\":\"styles_box__spaceBetween__Jw2qa\",\"nav\":\"styles_nav__2JD1D\",\"nav_logo\":\"styles_nav_logo__3Pf95\",\"nav_search\":\"styles_nav_search__1AVBI\",\"button_icon\":\"styles_button_icon__3_emB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar_box\":\"styles_sidebar_box__3dBt9\",\"box__alignItemsCenter\":\"styles_box__alignItemsCenter__S4szp\",\"box__center\":\"styles_box__center__2tdL2\",\"box__flex\":\"styles_box__flex__1mFpX\",\"box__end\":\"styles_box__end__3KUct\",\"box__spaceBetween\":\"styles_box__spaceBetween__2ztnx\",\"reserveBox\":\"styles_reserveBox__1S-Kb\",\"routeInfoBox_routeName\":\"styles_routeInfoBox_routeName__2YqCp\",\"routeInfoBox_routeDirection\":\"styles_routeInfoBox_routeDirection__bB1d8\",\"routeInfoBox_routeTimeBox\":\"styles_routeInfoBox_routeTimeBox__13nlG\",\"routeTimeBox_Time\":\"styles_routeTimeBox_Time__z5wAG\",\"routeTimeBox_Minute\":\"styles_routeTimeBox_Minute__3yvXx\",\"routeInfoBox_stopName\":\"styles_routeInfoBox_stopName__18puS\",\"buttonBox_button\":\"styles_buttonBox_button__1ovGv\",\"button_cancel\":\"styles_button_cancel__MEcYH\",\"button_help\":\"styles_button_help__ggRnn\"};"],"sourceRoot":""}