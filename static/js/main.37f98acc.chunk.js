(this["webpackJsonptake-a-bus"]=this["webpackJsonptake-a-bus"]||[]).push([[0],{10:function(t,e,o){t.exports={sidebar_box:"styles_sidebar_box__1ROA6",box__alignItemsCenter:"styles_box__alignItemsCenter__2IwSb",box__spaceBetween:"styles_box__spaceBetween__12xHk",sidebar_weatherBox__paddingBottom:"styles_sidebar_weatherBox__paddingBottom__1ZsPq",weatherBox_leftInfoBox:"styles_weatherBox_leftInfoBox__1tepf",leftInfoBox__marginBottom:"styles_leftInfoBox__marginBottom__36gRV",leftInfoBox_locationIcon:"styles_leftInfoBox_locationIcon__cNuHk",leftInfoBox_locationText:"styles_leftInfoBox_locationText__3WeYF",leftInfoBox__marginRight:"styles_leftInfoBox__marginRight__23AAN",leftInfoBox_smallText:"styles_leftInfoBox_smallText__FEPAP",rightInfoBox_currentTemp:"styles_rightInfoBox_currentTemp__3g-dc",rightInfoBox_weatherIcon:"styles_rightInfoBox_weatherIcon__2dILF"}},11:function(t,e,o){t.exports={sidebar_box:"styles_sidebar_box__1rq78",box__alignItemsCenter:"styles_box__alignItemsCenter__3RmUW",box__spaceBetween:"styles_box__spaceBetween__I-SKm",box_linkRow:"styles_box_linkRow__3C4pk",linkRow__fontSize:"styles_linkRow__fontSize__1dwiL",linkRow_arrowIcon:"styles_linkRow_arrowIcon__SFpdP",nearbyBox__marginBottom:"styles_nearbyBox__marginBottom__2eYf-",routeStopBox_stopInfoBox:"styles_routeStopBox_stopInfoBox__14G_k",stopInfoBox_stopName__fontSize:"styles_stopInfoBox_stopName__fontSize__3RB2Y",stopInfoBox_stopDistance__fontSize:"styles_stopInfoBox_stopDistance__fontSize__-kYW_",routeStopBox_routeNameBox:"styles_routeStopBox_routeNameBox__2JDmh",routeNameBox_routeName:"styles_routeNameBox_routeName__112Eq"}},12:function(t,e,o){t.exports={sidebar_box:"styles_sidebar_box__14YyD",box__alignItemsCenter:"styles_box__alignItemsCenter__do_9c",box__center:"styles_box__center__1ba2X",box__spaceBetween:"styles_box__spaceBetween__Pj6-C",box_linkRow:"styles_box_linkRow__2O6Gk",linkRow__fontSize:"styles_linkRow__fontSize__3PqkF",linkRow_arrowIcon:"styles_linkRow_arrowIcon__2h3W5",certainStopBox_linkSetting:"styles_certainStopBox_linkSetting__1td8f",nearbyBox_titleBox:"styles_nearbyBox_titleBox__1D0r9",nearbyBox_certainStopBox:"styles_nearbyBox_certainStopBox__1QIek",certainStopBox_frontBox:"styles_certainStopBox_frontBox__34Qi3",certainStopBox_shadow:"styles_certainStopBox_shadow__1UOvR",routeStopBox_stopInfoBox:"styles_routeStopBox_stopInfoBox__1or8f",stopInfoBox_stopName__fontSize:"styles_stopInfoBox_stopName__fontSize__14mzi",stopInfoBox_stopDistance__fontSize:"styles_stopInfoBox_stopDistance__fontSize__1qERg",routeStopBox_routeNameBox:"styles_routeStopBox_routeNameBox__3SEC4",routeNameBox_routeName:"styles_routeNameBox_routeName__2cVRl"}},125:function(t,e,o){"use strict";o.r(e);var a=o(1),n=o.n(a),c=o(42),s=o.n(c),i=(o(79),o(13)),_=o(2),r=o(9),l=o(3),x={SET_POSITION:"SET_POSITION",SET_LOCATION:"SET_LOCATION",SET_WEATHER:"SET_WEATHER",SET_NEARBYSTOPS:"SET_NEARBYSTOPS",SET_CERTAINROUTES:"SET_CERTAINROUTES",SET_SELECTSTOPINDEX:"SET_SELECTSTOPINDEX",BEGIN_DATA_REQUEST:"BEGIN_DATA_REQUEST",SUCCESS_DATA_REQUEST:"SUCCESS_DATA_REQUEST",FAIL_DATA_REQUEST:" FAIL_DATA_REQUEST"},u=o(0),b=Object(a.createContext)(),j={position:null,location:null,weather:null,nearbyStops:null,certainRoutes:null,selectStopIndex:0,requestdata:{loading:!1,error:null}};function d(t,e){switch(e.type){case x.SET_POSITION:return Object(l.a)(Object(l.a)({},t),{},{position:e.payload});case x.SET_LOCATION:return Object(l.a)(Object(l.a)({},t),{},{location:e.payload});case x.SET_WEATHER:return Object(l.a)(Object(l.a)({},t),{},{weather:e.payload});case x.SET_NEARBYSTOPS:return Object(l.a)(Object(l.a)({},t),{},{nearbyStops:e.payload});case x.SET_CERTAINROUTES:return Object(l.a)(Object(l.a)({},t),{},{certainRoutes:e.payload});case x.SET_SELECTSTOPINDEX:return Object(l.a)(Object(l.a)({},t),{},{selectStopIndex:e.payload});case x.BEGIN_DATA_REQUEST:return Object(l.a)(Object(l.a)({},t),{},{requestdata:Object(l.a)(Object(l.a)({},t.requestdata),{},{loading:!0})});case x.SUCCESS_DATA_REQUEST:return Object(l.a)(Object(l.a)({},t),{},{requestdata:Object(l.a)(Object(l.a)({},t.requestdata),{},{loading:!1})});case x.FAIL_DATA_REQUEST:return Object(l.a)(Object(l.a)({},t),{},{requestdata:Object(l.a)(Object(l.a)({},t.requestdata),{},{loading:!1,error:e.payload})});default:return t}}function p(t){var e=Object(a.useReducer)(d,j),o=Object(r.a)(e,2),n={state:o[0],dispatch:o[1]};return Object(u.jsx)(b.Provider,{value:n,children:t.children})}var m=o(66),B=o.n(m),f="/thef2e-take-a-bus/",y="/thef2e-take-a-bus/certainStop",h="/thef2e-take-a-bus/nearbyStops",S="/thef2e-take-a-bus/certainRoute",O=o(21),I=o.n(O),N=o(15),g=o.n(N),v=o(28),E=o(33),w=o.n(E),T=o(73),D=o(68),R=o(25),C="https://ptx.transportdata.tw/MOTC/v2/Bus";function k(){var t=(new Date).toGMTString(),e=new T.a("SHA-1","TEXT");return e.setHMACKey("AqupXvSAdKge3ptnkghRmreRdrc","TEXT"),e.update("x-date: "+t),{Authorization:'hmac username="88836dc3bd984400b7b3ea51e35e2627", algorithm="hmac-sha1", headers="x-date", signature="'+e.getHMAC("B64")+'"',"X-Date":t}}var A=function(){var t=Object(v.a)(g.a.mark((function t(e,o){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:x.BEGIN_DATA_REQUEST}),a=o.position;try{e({type:x.SET_POSITION,payload:a}),e({type:x.SUCCESS_DATA_REQUEST})}catch(n){e({type:x.FAIL_DATA_REQUEST,payload:n})}case 3:case"end":return t.stop()}}),t)})));return function(e,o){return t.apply(this,arguments)}}(),F=function(){var t=Object(v.a)(g.a.mark((function t(e,o){var a,n,c,s,i,_;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:x.BEGIN_DATA_REQUEST}),a=o.lng,n=o.lat,t.prev=2,c="".concat("https://api.nlsc.gov.tw/other/TownVillagePointQuery","/").concat(a,"/").concat(n),t.next=6,w.a.get(c);case 6:s=t.sent,i=s.data,_={city:i.ctyName,town:i.townName},e({type:x.SET_LOCATION,payload:_}),e({type:x.SUCCESS_DATA_REQUEST}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),e({type:x.FAIL_DATA_REQUEST,payload:t.t0});case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,o){return t.apply(this,arguments)}}(),U=function(){var t=Object(v.a)(g.a.mark((function t(e,o){var a,n,c,s,i,_,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:x.BEGIN_DATA_REQUEST}),a=o.city,n=o.town,c=o.timeFrom,s=o.timeTo,i=0;case 3:if(!(i<R.length)){t.next=16;break}if(R[i].city!==a){t.next=13;break}return _=R[i].cityID,t.prev=6,t.delegateYield(g.a.mark((function t(){var o,a,i,l,u,b,j,d,p,m,B,f;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="".concat("https://opendata.cwb.gov.tw/api/v1/rest/datastore","/").concat(_,"?Authorization=CWB-CF0FED1F-8E9E-4451-9F24-5C3A0D03A267&locationName=").concat(n,"&elementName=Wx,PoP12h,T&timeFrom=").concat(c,"&timeTo=").concat(s),t.next=3,w.a.get(o);case 3:if(a=t.sent,i=a.data,l=i.records.locations[0].location[0].weatherElement[0],u=i.records.locations[0].location[0].weatherElement[1],b=i.records.locations[0].location[0].weatherElement[2],j=l.time[0].elementValue[0].value,d=u.time[0].elementValue[0].value,p=[],b.time.length>8)for(r=0;r<8;r++)p.push(b.time[r].elementValue[0].value);else b.time.map((function(t){return p.push(t.elementValue[0].value)}));m=p[0],B=p.sort()[0],f=p.sort()[p.length-1],e({type:x.SET_WEATHER,payload:{rainRate:j,weatherState:d,currentTemp:m,minTemp:B,maxTemp:f}}),e({type:x.SUCCESS_DATA_REQUEST});case 18:case"end":return t.stop()}}),t)}))(),"t0",8);case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(6),e({type:x.FAIL_DATA_REQUEST,payload:t.t1});case 13:i++,t.next=3;break;case 16:case"end":return t.stop()}}),t,null,[[6,10]])})));return function(e,o){return t.apply(this,arguments)}}(),z=function(){var t=Object(v.a)(g.a.mark((function t(e,o){var a,n,c,s,i,_,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:x.BEGIN_DATA_REQUEST}),a=o.lng,n=o.lat,t.prev=2,c="".concat(C,"/Station/NearBy?$spatialFilter=nearby(").concat(n,",").concat(a,",500)&$format=JSON'/").concat(a,"/").concat(n),s={headers:k()},t.next=7,w.a.get(c,s);case 7:i=t.sent,_=i.data,r=[],_.map((function(t){var e=t.StationID,o=t.StationName.Zh_tw,c=t.StationPosition.PositionLon,s=t.StationPosition.PositionLat,i=Object(D.getDistance)({latitude:n,longitude:a},{latitude:s,longitude:c}),_=[];t.Stops.map((function(t){return _.push(t.RouteName.Zh_tw)})),r.push({stationID:e,stationName:o,stationLon:c,stationLat:s,stationDistance:i,routes:_})})),r.sort((function(t,e){return t.stationDistance>e.stationDistance?1:t.stationDistance<e.stationDistance?-1:0})),e({type:x.SET_NEARBYSTOPS,payload:r}),e({type:x.SUCCESS_DATA_REQUEST}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),e({type:x.FAIL_DATA_REQUEST,payload:t.t0});case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(e,o){return t.apply(this,arguments)}}(),P=function(){var t=Object(v.a)(g.a.mark((function t(e,o){var a,n,c,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:x.BEGIN_DATA_REQUEST}),a=o.stationID,n=o.city,c=0;case 3:if(!(c<R.length)){t.next=16;break}if(R[c].city!==n){t.next=13;break}return s=R[c].cityEn,t.prev=6,t.delegateYield(g.a.mark((function t(){var o,n,c,i,_;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="".concat(C,"/EstimatedTimeOfArrival/City/").concat(s,"/PassThrough/Station/").concat(a),n={headers:k()},t.next=4,w.a.get(o,n);case 4:c=t.sent,i=c.data,_=[],i.map((function(t){var e=t.RouteID,o=t.RouteName.Zh_tw,a=["".concat(Math.round(t.EstimateTime/60)," \u5206"),"\u5c1a\u672a\u767c\u8eca","\u4ea4\u7ba1\u4e0d\u505c\u9760","\u672b\u73ed\u8eca\u5df2\u904e","\u4eca\u65e5\u672a\u71df\u904b","\u9032\u7ad9\u4e2d"],n=null;n=Math.round(t.EstimateTime/60)<=1?a[5]:t.StopStatus>=0?a[t.StopStatus]:null,_.push({routeID:e,routeName:o,stopStatus:n})})),e({type:x.SET_CERTAINROUTES,payload:_}),e({type:x.SUCCESS_DATA_REQUEST});case 10:case"end":return t.stop()}}),t)}))(),"t0",8);case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(6),e({type:x.FAIL_DATA_REQUEST,payload:t.t1});case 13:c++,t.next=3;break;case 16:case"end":return t.stop()}}),t,null,[[6,10]])})));return function(e,o){return t.apply(this,arguments)}}(),Q=function(){var t=Object(v.a)(g.a.mark((function t(e,o){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:x.BEGIN_DATA_REQUEST}),a=o.index;try{e({type:x.SET_SELECTSTOPINDEX,payload:a}),e({type:x.SUCCESS_DATA_REQUEST})}catch(n){e({type:x.FAIL_DATA_REQUEST,payload:n})}case 3:case"end":return t.stop()}}),t)})));return function(e,o){return t.apply(this,arguments)}}(),L=o(14),Y=o(6);var H=function(){var t=Object(a.useContext)(b).dispatch;return Object(u.jsxs)("div",{className:"".concat(I.a.nav," ").concat(I.a.box__spaceBetween),children:[Object(u.jsx)(i.b,{to:f,onClick:function(){return Q(t,{index:0})},children:Object(u.jsx)("div",{className:I.a.nav_logo})}),Object(u.jsxs)("div",{className:I.a.nav_buttonBox,children:[Object(u.jsxs)("div",{className:I.a.buttonBox_button,children:[Object(u.jsx)(i.b,{to:f,className:I.a.buttonBox_front,onClick:function(){return Q(t,{index:0})},children:Object(u.jsx)(L.a,{className:I.a.button_icon,icon:Y.g})}),Object(u.jsx)("div",{className:I.a.buttonBox_shadow})]}),Object(u.jsxs)("div",{className:I.a.buttonBox_button,children:[Object(u.jsx)(i.b,{to:h,className:I.a.buttonBox_front,onClick:function(){return Q(t,{index:0})},children:Object(u.jsx)(L.a,{className:I.a.button_icon,icon:Y.h})}),Object(u.jsx)("div",{className:I.a.buttonBox_shadow})]})]})]})},M=o(17),G=o.n(M),X=o.p+"static/media/currentMarker.75df87e2.svg",K=o.p+"static/media/stopMarker.2a67d0aa.svg",q=o(22),W=o.n(q),Z=o(127),V=o(128),J=o(129),$=o(130),tt=o(131);function et(){var t=Object(_.f)(),e=Object(a.useState)([]),o=Object(r.a)(e,2),n=o[0],c=o[1],s=Object(a.useContext)(b),i=s.state,l=i.position,x=i.location,j=i.nearbyStops,d=i.selectStopIndex,p=s.dispatch,m=new W.a.Icon({iconUrl:X,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:G.a.currentIcon}),B=new W.a.Icon({iconUrl:K,iconSize:[37,61],iconAnchor:[19,61],popupAnchor:[1,-34],shadowSize:[61,61],className:G.a.selectIcon}),f=new W.a.Icon({iconUrl:K,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),h=Object(Z.a)();Object(a.useEffect)((function(){h.locate().on("locationfound",(function(t){A(p,{position:t.latlng}),Q(p,{index:0}),h.flyTo(t.latlng,h.getZoom())}))}),[h]);var S=Object(Z.b)({click:function(t){A(p,{position:t.latlng}),Q(p,{index:0}),S.flyTo(t.latlng,S.getZoom())}});return Object(a.useEffect)((function(){l&&(F(p,{lng:l.lng,lat:l.lat}),c([]))}),[l]),Object(a.useEffect)((function(){if(j){var t=[];j.map((function(e){t.push({position:{lat:e.stationLat,lng:e.stationLon},stationName:e.stationName,stationDistance:e.stationDistance})})),c(t)}}),[j]),null===x?null:Object(u.jsxs)(a.Fragment,{children:[Object(u.jsx)(V.a,{position:l,icon:m,children:Object(u.jsx)(J.a,{className:G.a.tooltip,direction:"top",opacity:1,offset:[0,-41],children:Object(u.jsxs)("div",{className:G.a.tooltip_rowBox,children:[Object(u.jsx)("div",{className:"".concat(G.a.rowBox_titleText," ").concat(G.a.rowBox__marginRight),children:x.city}),Object(u.jsx)("div",{className:G.a.rowBox_titleText,children:x.town})]})})}),n.map((function(e,o){return Object(u.jsx)(V.a,{position:e.position,icon:o===d?B:f,className:G.a.allIcon,eventHandlers:{click:function(){Q(p,{index:o}),t(y,{state:{clickStopIndex:o}})}},children:Object(u.jsx)(J.a,{className:G.a.tooltip,direction:"top",opacity:1,offset:[0,-40],children:Object(u.jsxs)("div",{className:G.a.tooltip_rowBox,children:[Object(u.jsx)("div",{className:"".concat(G.a.rowBox_titleText," ").concat(G.a.rowBox__marginRight),children:e.stationName}),Object(u.jsxs)("div",{className:G.a.rowBox_stopDistance,children:[e.stationDistance," \u516c\u5c3a"]})]})})},o)}))]})}var ot=function(){return Object(u.jsx)(a.Fragment,{children:Object(u.jsxs)($.a,{center:[25.022729,121.545103],zoom:30,scrollWheelZoom:!0,className:G.a.map,children:[Object(u.jsx)(tt.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(u.jsx)(et,{})]})})},at=o(69),nt=o.n(at),ct=o(32),st=o.n(ct);var it=function(){return Object(u.jsxs)("div",{className:st.a.searchBar,children:[Object(u.jsx)(L.a,{className:st.a.searchBar_icon,icon:Y.j}),Object(u.jsx)("div",{className:"".concat(st.a.searchBar_inputBox," ").concat(st.a.box__alignItemsCenter),children:Object(u.jsx)("input",{className:st.a.inputBox_text,type:"text",placeholder:"\u641c\u5c0b\u8eca\u7ad9\u6216\u7ad9\u724c\u540d\u7a31"})})]})},_t=o(48),rt=o.n(_t),lt=o(10),xt=o.n(lt);var ut=function(){var t=Object(a.useContext)(b),e=t.state,o=e.location,n=e.weather,c=t.dispatch;return Object(a.useEffect)((function(){if(o){var t=new Date,e=rt()(t).format("YYYY-MM-DDTHH:MM:SS"),a=t.setDate(t.getDate()+1),n=rt()(a).format("YYYY-MM-DDTHH:MM:SS");U(c,{city:o.city,town:o.town,timeFrom:e,timeTo:n})}}),[o]),Object(a.useEffect)((function(){}),[n]),Object(u.jsx)("div",{className:"".concat(xt.a.sidebar_box," ").concat(xt.a.box__alignItemsCenter," ").concat(xt.a.box__spaceBetween," ").concat(xt.a.sidebar_weatherBox__paddingBottom),children:n?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:xt.a.weatherBox_leftInfoBox,children:[Object(u.jsxs)("div",{className:"".concat(xt.a.leftInfoBox__marginBottom," ").concat(xt.a.box__alignItemsCenter),children:[Object(u.jsx)(L.a,{className:xt.a.leftInfoBox_locationIcon,icon:Y.i}),Object(u.jsx)("div",{className:xt.a.leftInfoBox_locationText,children:o.city}),Object(u.jsx)("div",{className:xt.a.leftInfoBox_locationText,children:o.town})]}),Object(u.jsxs)("div",{className:xt.a.box__alignItemsCenter,children:[Object(u.jsxs)("div",{className:"".concat(xt.a.leftInfoBox__marginRight," ").concat(xt.a.box__alignItemsCenter),children:[Object(u.jsx)("div",{className:xt.a.leftInfoBox_smallText,children:"\u964d\u96e8\u7387"}),Object(u.jsxs)("div",{className:xt.a.leftInfoBox_smallText,children:[n.rainRate," %"]})]}),Object(u.jsxs)("div",{className:xt.a.box__alignItemsCenter,children:[Object(u.jsxs)("div",{className:xt.a.leftInfoBox_smallText,children:[n.minTemp," \u02daC"]}),Object(u.jsx)("div",{className:xt.a.leftInfoBox_smallText,children:"/"}),Object(u.jsxs)("div",{className:xt.a.leftInfoBox_smallText,children:[n.maxTemp," \u02daC"]})]})]})]}),Object(u.jsxs)("div",{className:xt.a.box__alignItemsCenter,children:[Object(u.jsxs)("div",{className:xt.a.rightInfoBox_currentTemp,children:[n.currentTemp," \u02daC"]}),Object(u.jsx)(L.a,{className:xt.a.rightInfoBox_weatherIcon,icon:n.weatherState.includes("\u6674")&&n.weatherState.includes("\u96e8")?Y.f:n.weatherState.includes("\u6674")&&n.weatherState.includes("\u96f2")?Y.e:n.weatherState.includes("\u96ea")?Y.l:n.weatherState.includes("\u9727")?Y.k:n.weatherState.includes("\u96f7")?Y.b:n.weatherState.includes("\u96e8")?Y.d:n.weatherState.includes("\u6674")?Y.m:Y.c})]})]}):Object(u.jsx)(u.Fragment,{})})},bt=o(7),jt=o.n(bt);var dt=function(){var t=Object(a.useState)(null),e=Object(r.a)(t,2),o=e[0],n=e[1],c=Object(a.useState)([]),s=Object(r.a)(c,2),_=s[0],l=s[1],x=Object(a.useContext)(b),j=x.state,d=j.location,p=j.nearbyStops,m=j.certainRoutes,B=x.dispatch;return Object(a.useEffect)((function(){p&&p.length>0&&n(p[0])}),[p]),Object(a.useEffect)((function(){d&&o&&P(B,{city:d.city,stationID:o.stationID})}),[d,o]),Object(a.useEffect)((function(){if(m)if(m.length>5){for(var t=[],e=0;e<5;e++)t.push(m[e]);l(t)}else l(m)}),[m]),Object(u.jsxs)("div",{className:jt.a.sidebar_box,children:[Object(u.jsxs)("div",{className:"".concat(jt.a.box_linkRow," ").concat(jt.a.box__alignItemsCenter," ").concat(jt.a.box__spaceBetween," ").concat(jt.a.closestBox_titlebox__marginBottom),children:[Object(u.jsx)("div",{className:jt.a.linkRow__fontSize,children:"\u6700\u8fd1\u7ad9\u724c"}),Object(u.jsx)(i.b,{to:y,state:{clickStopIndex:0},onClick:function(){return Q(B,{index:0})},children:Object(u.jsx)(L.a,{className:jt.a.linkRow_arrowIcon,icon:Y.a})})]}),Object(u.jsx)("div",{className:"".concat(jt.a.closestBox_box__marginBottom," ").concat(jt.a.box__alignItemsCenter," ").concat(jt.a.box__spaceBetween),children:p&&p[0]?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:jt.a.closestBox_stopName,children:p[0].stationName}),Object(u.jsxs)("div",{className:jt.a.closestBox_stopDistance__fontSize,children:[p[0].stationDistance," \u516c\u5c3a"]})]}):Object(u.jsx)(u.Fragment,{})}),m?Object(u.jsx)(u.Fragment,{children:_.map((function(t,e){return Object(u.jsxs)("div",{className:"".concat(jt.a.closestBox_currentInfoBox," ").concat(jt.a.closestBox_box__marginBottom," ").concat(jt.a.box__alignItemsCenter),children:[Object(u.jsx)("div",{className:jt.a.currentInfoBox_routeName,children:t.routeName}),Object(u.jsx)("div",{className:jt.a.currentInfoBox_routeDirection,children:t.routeID}),Object(u.jsx)("div",{className:"\u9032\u7ad9\u4e2d"===t.stopStatus?"".concat(jt.a.currentInfoBox_routeState," ").concat(jt.a.routeState__textGreen):"\u5c1a\u672a\u767c\u8eca"===t.stopStatus||"\u4ea4\u7ba1\u4e0d\u505c\u9760"===t.stopStatus||"\u672b\u73ed\u8eca\u5df2\u904e"===t.stopStatus||"\u4eca\u65e5\u672a\u71df\u904b"===t.stopStatus?"".concat(jt.a.currentInfoBox_routeState," ").concat(jt.a.routeState__textPink):"".concat(jt.a.currentInfoBox_routeState," ").concat(jt.a.routeState__textDark),children:t.stopStatus})]},e)}))}):Object(u.jsx)(u.Fragment,{})]})},pt=o(11),mt=o.n(pt);var Bt=function(){var t=Object(a.useState)([]),e=Object(r.a)(t,2),o=e[0],n=e[1],c=Object(a.useContext)(b),s=c.state,_=s.position,l=s.nearbyStops,x=c.dispatch;return Object(a.useEffect)((function(){_&&z(x,{lng:_.lng,lat:_.lat})}),[_]),Object(a.useEffect)((function(){if(l)if(l.length>5){for(var t=[],e=0;e<5;e++)t.push(l[e]);n(t)}else n(l)}),[l]),Object(u.jsxs)("div",{className:mt.a.sidebar_box,children:[Object(u.jsxs)("div",{className:"".concat(mt.a.box_linkRow," ").concat(mt.a.box__alignItemsCenter," ").concat(mt.a.box__spaceBetween," ").concat(mt.a.nearbyBox__marginBottom),children:[Object(u.jsx)("div",{className:mt.a.linkRow__fontSize,children:"\u9644\u8fd1\u7ad9\u724c"}),Object(u.jsx)(i.b,{to:h,children:Object(u.jsx)(L.a,{className:mt.a.linkRow_arrowIcon,icon:Y.a})})]}),l?Object(u.jsx)(u.Fragment,{children:o.map((function(t,e){return Object(u.jsxs)("div",{className:mt.a.nearbyBox__marginBottom,children:[Object(u.jsxs)("div",{className:"".concat(mt.a.routeStopBox_stopInfoBox," ").concat(mt.a.box__alignItemsCenter," ").concat(mt.a.box__spaceBetween),children:[Object(u.jsx)("div",{className:mt.a.stopInfoBox_stopName__fontSize,children:t.stationName}),Object(u.jsxs)("div",{className:mt.a.stopInfoBox_stopDistance__fontSize,children:[t.stationDistance," \u516c\u5c3a"]})]}),Object(u.jsxs)("div",{className:"".concat(mt.a.box_linkRow," ").concat(mt.a.box__alignItemsCenter," ").concat(mt.a.box__spaceBetween," ").concat(mt.a.nearbyBox__marginBottom),children:[Object(u.jsx)("div",{className:mt.a.routeStopBox_routeNameBox,children:t.routes.map((function(t,e){return Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"".concat(mt.a.routeNameBox_routeName," ").concat(mt.a.linkRow__fontSize," ").concat(mt.a.box__alignItemsCenter),children:t})},e)}))}),Object(u.jsx)(i.b,{to:y,state:{clickStopIndex:e},onClick:function(){return Q(x,{index:e})},children:Object(u.jsx)(L.a,{className:mt.a.linkRow_arrowIcon,icon:Y.a})})]})]},e)}))}):Object(u.jsx)(u.Fragment,{})]})};var ft=function(){return Object(u.jsx)(a.Fragment,{children:Object(u.jsxs)("div",{className:nt.a.sidebar,children:[Object(u.jsx)(it,{}),Object(u.jsx)(ut,{}),Object(u.jsx)(dt,{}),Object(u.jsx)(Bt,{})]})})},yt=o(70),ht=o.n(yt),St=o(12),Ot=o.n(St);var It=function(){var t=Object(a.useContext)(b),e=t.state,o=e.position,n=e.nearbyStops,c=t.dispatch;return Object(a.useEffect)((function(){o&&z(c,{lng:o.lng,lat:o.lat})}),[o]),Object(a.useEffect)((function(){}),[n]),Object(u.jsxs)("div",{className:Ot.a.sidebar_box,children:[Object(u.jsx)("div",{className:"".concat(Ot.a.box__alignItemsCenter," ").concat(Ot.a.box__center," ").concat(Ot.a.nearbyBox_titleBox),children:"\u9644\u8fd1\u7ad9\u724c"}),n?Object(u.jsx)(u.Fragment,{children:n.map((function(t,e){return Object(u.jsx)("div",{className:Ot.a.nearbyBox_certainStopBox,children:Object(u.jsxs)(i.b,{to:y,className:Ot.a.certainStopBox_linkSetting,state:{clickStopIndex:e},onClick:function(){return Q(c,{index:e})},children:[Object(u.jsxs)("div",{className:Ot.a.certainStopBox_frontBox,children:[Object(u.jsxs)("div",{className:"".concat(Ot.a.routeStopBox_stopInfoBox," ").concat(Ot.a.box__alignItemsCenter," ").concat(Ot.a.box__spaceBetween),children:[Object(u.jsx)("div",{className:Ot.a.stopInfoBox_stopName__fontSize,children:t.stationName}),Object(u.jsxs)("div",{className:Ot.a.stopInfoBox_stopDistance__fontSize,children:[t.stationDistance," \u516c\u5c3a"]})]}),Object(u.jsxs)("div",{className:"".concat(Ot.a.box_linkRow," ").concat(Ot.a.box__alignItemsCenter," ").concat(Ot.a.box__spaceBetween),children:[Object(u.jsx)("div",{className:Ot.a.routeStopBox_routeNameBox,children:t.routes.map((function(t,e){return Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"".concat(Ot.a.routeNameBox_routeName," ").concat(Ot.a.linkRow__fontSize," ").concat(Ot.a.box__alignItemsCenter),children:t})},e)}))}),Object(u.jsx)(L.a,{className:Ot.a.linkRow_arrowIcon,icon:Y.a})]})]}),Object(u.jsx)("div",{className:Ot.a.certainStopBox_shadow})]})},e)}))}):Object(u.jsx)(u.Fragment,{})]})};var Nt=function(){return Object(u.jsx)(a.Fragment,{children:Object(u.jsxs)("div",{className:ht.a.sidebar,children:[Object(u.jsx)(it,{}),Object(u.jsx)(ut,{}),Object(u.jsx)(It,{})]})})},gt=o(71),vt=o.n(gt),Et=o(8),wt=o.n(Et);var Tt=function(){var t=Object(_.e)().state.clickStopIndex,e=Object(a.useState)(null),o=Object(r.a)(e,2),n=o[0],c=o[1],s=Object(a.useState)(null),l=Object(r.a)(s,2),x=l[0],j=l[1],d=Object(a.useContext)(b),p=d.state,m=p.position,B=p.location,f=p.nearbyStops,y=p.certainRoutes,h=d.dispatch;return Object(a.useEffect)((function(){null===x?j(!1):(t=0,j(!0),m&&z(h,{lng:m.lng,lat:m.lat}))}),[B]),Object(a.useEffect)((function(){f&&f.length>t&&c(f[t])}),[f,t]),Object(a.useEffect)((function(){B&&n&&P(h,{city:B.city,stationID:n.stationID})}),[B,n]),Object(a.useEffect)((function(){}),[y]),Object(u.jsxs)("div",{className:wt.a.sidebar_box,children:[Object(u.jsx)("div",{className:wt.a.certainStopBox_titlebox__marginBottom,children:f&&f[t]&&B?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"".concat(wt.a.box__alignItemsCenter," ").concat(wt.a.box__center," ").concat(wt.a.certainStopBox_stopName),children:f[t].stationName}),Object(u.jsx)("div",{className:"".concat(wt.a.box__alignItemsCenter," ").concat(wt.a.box__center," ").concat(wt.a.certainStopBox_stopInfo),children:Object(u.jsxs)("div",{className:wt.a.stopInfo_detailBox,children:[Object(u.jsx)("div",{children:B.city}),Object(u.jsx)("div",{children:B.town}),Object(u.jsxs)("div",{children:[f[t].stationDistance," \u516c\u5c3a"]})]})})]}):Object(u.jsx)(u.Fragment,{})}),y?Object(u.jsx)(u.Fragment,{children:y.map((function(t,e){return Object(u.jsx)("div",{className:wt.a.certainStopBox_certainRouteBox,children:Object(u.jsxs)(i.b,{to:S,className:wt.a.certainRouteBox_linkSetting,state:{clickRouteName:t.routeName},children:[Object(u.jsxs)("div",{className:"".concat(wt.a.certainRouteBox_frontBox," ").concat(wt.a.box__alignItemsCenter),children:[Object(u.jsx)("div",{className:wt.a.certainRouteBox_routeName,children:t.routeName}),Object(u.jsx)("div",{className:wt.a.certainRouteBox_routeDirection,children:t.routeID}),Object(u.jsx)("div",{className:"\u9032\u7ad9\u4e2d"===t.stopStatus?"".concat(wt.a.certainRouteBox_routeState," ").concat(wt.a.routeState__textGreen):"\u5c1a\u672a\u767c\u8eca"===t.stopStatus||"\u4ea4\u7ba1\u4e0d\u505c\u9760"===t.stopStatus||"\u672b\u73ed\u8eca\u5df2\u904e"===t.stopStatus||"\u4eca\u65e5\u672a\u71df\u904b"===t.stopStatus?"".concat(wt.a.certainRouteBox_routeState," ").concat(wt.a.routeState__textPink):"".concat(wt.a.certainRouteBox_routeState," ").concat(wt.a.routeState__textDark),children:t.stopStatus}),Object(u.jsx)(L.a,{className:wt.a.certainRouteBox_arrowIcon,icon:Y.a})]},e),Object(u.jsx)("div",{className:wt.a.certainRouteBox_shadow})]})},e)}))}):Object(u.jsx)(u.Fragment,{})]})};var Dt=function(){return Object(u.jsx)(a.Fragment,{children:Object(u.jsxs)("div",{className:vt.a.sidebar,children:[Object(u.jsx)(it,{}),Object(u.jsx)(ut,{}),Object(u.jsx)(Tt,{})]})})},Rt=o(72),Ct=o.n(Rt),kt=o(4),At=o.n(kt);var Ft=function(){var t=Object(_.e)().state.clickRouteName;return Object(u.jsxs)("div",{className:At.a.sidebar_box,children:[Object(u.jsxs)("div",{className:At.a.topBox_padding,children:[Object(u.jsx)("div",{className:"".concat(At.a.box__alignItemsCenter," ").concat(At.a.box__center," ").concat(At.a.certainRouteBox_titleBox),children:t}),Object(u.jsxs)("div",{className:"".concat(At.a.certainRouteBox_buttonBox," ").concat(At.a.box__spaceBetween),children:[Object(u.jsx)("div",{className:"".concat(At.a.box__alignItemsCenter," ").concat(At.a.box__center," ").concat(At.a.buttonBox_button),children:"\u5f80\u5927\u76f4"}),Object(u.jsx)("div",{className:"".concat(At.a.box__alignItemsCenter," ").concat(At.a.box__center," ").concat(At.a.buttonBox_button),children:"\u5f80\u9e9f\u5149\u6377\u904b\u7ad9"})]})]}),Object(u.jsxs)("div",{className:"".concat(At.a.bottomBox_padding," ").concat(At.a.box__spaceBetween),children:[Object(u.jsx)("div",{className:At.a.certainRouteBox_routeStopBox,children:R.map((function(t){return Object(u.jsxs)("div",{className:At.a.routeStopBox_stopInfoBox,children:[Object(u.jsx)("div",{className:"".concat(At.a.box__alignItemsCenter," ").concat(At.a.box__center," ").concat(At.a.stopInfoBox_busStatus),children:t.city}),Object(u.jsx)("div",{className:"".concat(At.a.box__alignItemsCenter," ").concat(At.a.box__center," ").concat(At.a.stopInfoBox_stopName),children:t.cityEn})]},t)}))}),Object(u.jsxs)("div",{className:At.a.certainRouteBox_routeDotBox,children:[Object(u.jsx)("div",{className:At.a.routeDotBox_routeLine}),R.map((function(t){return Object(u.jsx)("div",{className:"".concat(At.a.box__alignItemsCenter," ").concat(At.a.box__center," ").concat(At.a.routeDotBox_stopCircleBox),children:Object(u.jsx)("div",{className:At.a.stopCircleBox_stopCircle})},t)}))]})]})]})};var Ut=function(){return Object(u.jsx)(a.Fragment,{children:Object(u.jsxs)("div",{className:Ct.a.sidebar,children:[Object(u.jsx)(it,{}),Object(u.jsx)(ut,{}),Object(u.jsx)(Ft,{})]})})},zt=function(){return Object(u.jsx)(p,{children:Object(u.jsx)(i.a,{children:Object(u.jsxs)("div",{className:B.a.container,children:[Object(u.jsx)(H,{}),Object(u.jsxs)(_.c,{children:[Object(u.jsx)(_.a,{exact:!0,path:f,element:Object(u.jsx)(ft,{})}),Object(u.jsx)(_.a,{exact:!0,path:y,element:Object(u.jsx)(Dt,{})}),Object(u.jsx)(_.a,{exact:!0,path:S,element:Object(u.jsx)(Ut,{})}),Object(u.jsx)(_.a,{exact:!0,path:h,element:Object(u.jsx)(Nt,{})})]}),Object(u.jsx)(ot,{})]})})})};s.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(zt,{})}),document.getElementById("root"))},17:function(t,e,o){t.exports={map:"styles_map__1W-rx",selectIcon:"styles_selectIcon__2I9-b",currentIcon:"styles_currentIcon__14oCd",tooltip:"styles_tooltip__2ymej",tooltip_rowBox:"styles_tooltip_rowBox__3oYzN",rowBox_titleText:"styles_rowBox_titleText__jXiBy",rowBox_stopDistance:"styles_rowBox_stopDistance__1gOKJ",rowBox__marginRight:"styles_rowBox__marginRight__3j6J0"}},21:function(t,e,o){t.exports={box__spaceBetween:"styles_box__spaceBetween__27Wtm",nav:"styles_nav__29WhC",nav_logo:"styles_nav_logo__1B_7Y",nav_buttonBox:"styles_nav_buttonBox__RYQme",buttonBox_button:"styles_buttonBox_button__24Z5a",buttonBox_front:"styles_buttonBox_front__2HBfM",buttonBox_shadow:"styles_buttonBox_shadow__1v9zc",button_icon:"styles_button_icon__2KnDZ"}},25:function(t){t.exports=JSON.parse('[{"city":"\u5b9c\u862d\u7e23","cityEn":"YilanCounty","cityID":"F-D0047-001"},{"city":"\u6843\u5712\u5e02","cityEn":"Taoyuan","cityID":"F-D0047-005"},{"city":"\u65b0\u7af9\u7e23","cityEn":"HsinchuCounty","cityID":"F-D0047-009"},{"city":"\u82d7\u6817\u7e23","cityEn":"MiaoliCounty","cityID":"F-D0047-013"},{"city":"\u5f70\u5316\u7e23","cityEn":"ChanghuaCounty","cityID":"F-D0047-017"},{"city":"\u5357\u6295\u7e23","cityEn":"NantouCounty","cityID":"F-D0047-021"},{"city":"\u96f2\u6797\u7e23","cityEn":"YunlinCounty","cityID":"F-D0047-025"},{"city":"\u5609\u7fa9\u7e23","cityEn":"ChiayiCounty","cityID":"F-D0047-029"},{"city":"\u5c4f\u6771\u7e23","cityEn":"PingtungCounty","cityID":"F-D0047-033"},{"city":"\u81fa\u6771\u7e23","cityEn":"TaitungCounty","cityID":"F-D0047-037"},{"city":"\u82b1\u84ee\u7e23","cityEn":"HualienCounty","cityID":"F-D0047-041"},{"city":"\u6f8e\u6e56\u7e23","cityEn":"PenghuCounty","cityID":"F-D0047-045"},{"city":"\u57fa\u9686\u5e02","cityEn":"Keelung","cityID":"F-D0047-049"},{"city":"\u57fa\u9686\u7e23","cityEn":"Keelung","cityID":"F-D0047-049"},{"city":"\u65b0\u7af9\u5e02","cityEn":"Hsinchu","cityID":"F-D0047-053"},{"city":"\u5609\u7fa9\u5e02","cityEn":"Chiayi","cityID":"F-D0047-057"},{"city":"\u81fa\u5317\u5e02","cityEn":"Taipei","cityID":"F-D0047-061"},{"city":"\u9ad8\u96c4\u5e02","cityEn":"Kaohsiung","cityID":"F-D0047-065"},{"city":"\u65b0\u5317\u5e02","cityEn":"NewTaipei","cityID":"F-D0047-069"},{"city":"\u81fa\u4e2d\u5e02","cityEn":"Taichung","cityID":"F-D0047-073"},{"city":"\u81fa\u5357\u5e02","cityEn":"Tainan","cityID":"F-D0047-077"},{"city":"\u9023\u6c5f\u7e23","cityEn":"LienchiangCounty","cityID":"F-D0047-081"},{"city":"\u91d1\u9580\u7e23","cityEn":"KinmenCounty","cityID":"F-D0047-085"}]')},32:function(t,e,o){t.exports={box__alignItemsCenter:"styles_box__alignItemsCenter__Vn3Pc",searchBar:"styles_searchBar__hRgsv",searchBar_icon:"styles_searchBar_icon__Id51D",searchBar_inputBox:"styles_searchBar_inputBox__2cpsw",inputBox_text:"styles_inputBox_text__3ao0q"}},4:function(t,e,o){t.exports={sidebar_box:"styles_sidebar_box__2AmtW",topBox_padding:"styles_topBox_padding__z6D_l",bottomBox_padding:"styles_bottomBox_padding__aIHcI",box__alignItemsCenter:"styles_box__alignItemsCenter__2Etof",box__center:"styles_box__center__3RAMc",box__spaceBetween:"styles_box__spaceBetween__3qdrZ",certainRouteBox_titleBox:"styles_certainRouteBox_titleBox__RHTaX",certainRouteBox_buttonBox:"styles_certainRouteBox_buttonBox__3VcXX",buttonBox_button:"styles_buttonBox_button__1a-4b",certainRouteBox_routeStopBox:"styles_certainRouteBox_routeStopBox__2Auu9",routeStopBox_stopInfoBox:"styles_routeStopBox_stopInfoBox__1Tf4X",stopInfoBox_busStatus:"styles_stopInfoBox_busStatus__QKhX4",stopInfoBox_stopName:"styles_stopInfoBox_stopName__3PVHk",certainRouteBox_routeDotBox:"styles_certainRouteBox_routeDotBox__1KZcT",routeDotBox_routeLine:"styles_routeDotBox_routeLine__3Kxx3",routeDotBox_stopCircleBox:"styles_routeDotBox_stopCircleBox__2Lmd7",stopCircleBox_stopCircle:"styles_stopCircleBox_stopCircle__3HX1E"}},66:function(t,e,o){t.exports={container:"styles_container__1YGCl"}},69:function(t,e,o){t.exports={sidebar:"styles_sidebar__7kdTc"}},7:function(t,e,o){t.exports={sidebar_box:"styles_sidebar_box__3QMcS",box__alignItemsCenter:"styles_box__alignItemsCenter__pum5p",box__spaceBetween:"styles_box__spaceBetween__2R7mb",box_linkRow:"styles_box_linkRow__2tfEl",linkRow__fontSize:"styles_linkRow__fontSize__12DoP",linkRow_arrowIcon:"styles_linkRow_arrowIcon__3Jurt",closestBox_titlebox__marginBottom:"styles_closestBox_titlebox__marginBottom__vnLsQ",closestBox_box__marginBottom:"styles_closestBox_box__marginBottom__wrU9R",closestBox_stopName:"styles_closestBox_stopName__38uep",closestBox_stopDistance__fontSize:"styles_closestBox_stopDistance__fontSize__2blyF",closestBox_currentInfoBox:"styles_closestBox_currentInfoBox__RJpNT",currentInfoBox_routeName:"styles_currentInfoBox_routeName__-8mzC",currentInfoBox_routeDirection:"styles_currentInfoBox_routeDirection__15xsv",currentInfoBox_routeState:"styles_currentInfoBox_routeState__2x_sI",routeState__textGreen:"styles_routeState__textGreen__3yy97",routeState__textPink:"styles_routeState__textPink__YTsK9",routeState__textDark:"styles_routeState__textDark__3lcnB"}},70:function(t,e,o){t.exports={sidebar:"styles_sidebar__3B6VX"}},71:function(t,e,o){t.exports={sidebar:"styles_sidebar__3Lus7"}},72:function(t,e,o){t.exports={sidebar:"styles_sidebar__2ZYRy"}},79:function(t,e,o){},8:function(t,e,o){t.exports={sidebar_box:"styles_sidebar_box__3fYG8",box__alignItemsCenter:"styles_box__alignItemsCenter__1A3sB",box__center:"styles_box__center__k4peg",certainStopBox_titlebox__marginBottom:"styles_certainStopBox_titlebox__marginBottom__1K3ly",certainStopBox_stopName:"styles_certainStopBox_stopName__1eEwR",certainStopBox_stopInfo:"styles_certainStopBox_stopInfo__2ElQK",stopInfo_detailBox:"styles_stopInfo_detailBox__1CtwF",certainRouteBox_linkSetting:"styles_certainRouteBox_linkSetting__l911k",certainStopBox_certainRouteBox:"styles_certainStopBox_certainRouteBox__uXrdl",certainRouteBox_frontBox:"styles_certainRouteBox_frontBox__1KF88",certainRouteBox_shadow:"styles_certainRouteBox_shadow__3ISba",certainRouteBox_routeName:"styles_certainRouteBox_routeName__1djc8",certainRouteBox_routeDirection:"styles_certainRouteBox_routeDirection__3GOKs",certainRouteBox_routeState:"styles_certainRouteBox_routeState__2Q2O5",routeState__textGreen:"styles_routeState__textGreen__1XvID",routeState__textPink:"styles_routeState__textPink__1lacx",routeState__textDark:"styles_routeState__textDark__1khnt",certainRouteBox_arrowIcon:"styles_certainRouteBox_arrowIcon__20D26"}}},[[125,1,2]]]);
//# sourceMappingURL=main.37f98acc.chunk.js.map